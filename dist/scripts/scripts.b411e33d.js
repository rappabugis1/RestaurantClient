"use strict";angular.module("clientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngStorage","ui.bootstrap","uiGmapgoogle-maps","firebase"]).config(["$routeProvider","$locationProvider","uiGmapGoogleMapApiProvider",function(a,b,c){c.configure({key:"AIzaSyAy1-kceVQSwDE2b8zTxJhkQSJ2UAXKFek",v:"3.20",libraries:"weather,geometry,visualization"});var d={apiKey:"AIzaSyDwXLLEIbSlRegHgiUVFy85G-Plk3sBhO4",authDomain:"abhrestaurant.firebaseapp.com",databaseURL:"https://abhrestaurant.firebaseio.com",projectId:"abhrestaurant",storageBucket:"abhrestaurant.appspot.com",messagingSenderId:"44801156935"};firebase.apps.length||firebase.initializeApp(d),a.when("/",{templateUrl:"views/home.html",controller:"HomeController",controllerAs:"main"}).when("/login",{templateUrl:"views/login.html",controller:"LoginController",controllerAs:"login"}).when("/register",{templateUrl:"views/register.html",controller:"RegisterController",controllerAs:"register"}).when("/restaurant",{templateUrl:"views/restaurant.html",controller:"RestaurantController",controllerAs:"restaurant"}).when("/reservation",{templateUrl:"views/reservation.html",controller:"ReservationController"}).when("/restaurants",{templateUrl:"views/restaurants.html",controller:"RestaurantsController"}).when("/myreservations",{templateUrl:"views/myreservations.html",controller:"MyReservationsController"}).when("/admin",{templateUrl:"views/admin.html",controller:"AdminPanelController"}).otherwise({redirectTo:"/"}),b.hashPrefix("")}]).run(["$rootScope","$http","$location","$localStorage","$window",function(a,b,c,d,e){d.currentUser&&(b.defaults.headers.common.Authorization="Bearer "+d.currentUser.token),a.$on("$locationChangeStart",function(){var a=["/login","/","","/register","/restaurant","/reservation","/restaurants"],b=-1===a.indexOf(c.path());b&&!d.currentUser&&c.path("/login"),"/admin"!==c.path()||f()||c.path("/login")});var f=function(){if(d.currentUser){var a=d.currentUser.token,b=a.split(".")[1],c=b.replace("-","+").replace("_","/"),e=JSON.parse(atob(c));return"admin"===e.user_type.toString()}return!1};a.$on("$routeChangeSuccess",function(){e.scrollTo(0,0)})}]),angular.module("clientApp").controller("HomeController",["$scope","$http","SessionStorageService","$location","RestaurantService","GeometryService",function(a,b,c,d,e,f){a.closeRests=54,f.getNumberForHome(function(b){-1!==b?(a.closeRests=b.data,a.noGeoLoc=!1):a.noGeoLoc=!0}),a.dishes=[{heading:"Best pizza of 2016",location:"Cazin",numRestaurants:8,img:"https://images.pexels.com/photos/825661/pexels-photo-825661.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},{heading:"Rice over the Orient",location:"Sarajevo",numRestaurants:1,img:"https://images.pexels.com/photos/1306548/pexels-photo-1306548.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},{heading:"Fresh and Spicy",location:"Kljuc",numRestaurants:3,img:"https://images.pexels.com/photos/675951/pexels-photo-675951.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},{heading:"Turkish kebab 2018",location:"Mostar",numRestaurants:5,img:"https://images.pexels.com/photos/604660/pexels-photo-604660.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},{heading:"Delicious sweets",location:"Travnik",numRestaurants:5,img:"https://images.pexels.com/photos/8382/pexels-photo.jpg?auto=compress&cs=tinysrgb&dpr=2&h=750&w=1260"},{heading:"Fresh and Spicy 2",location:"Maglaj",numRestaurants:9,img:"https://images.pexels.com/photos/461198/pexels-photo-461198.jpeg?auto=compress&cs=tinysrgb&dpr=2&h=540&w=680"}],a.numberRepeat=Math.ceil(a.dishes.length/3),a.range=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},a.save=function(a){c.save("restaurantId",JSON.stringify({id:a.id})),d.path("/restaurant")},e.getRandomRestaurants().then(function(b){a.restaurants=b.data})}]).controller("PopularLocationsController",["$scope","RestaurantService","SessionStorageService","$location",function(a,b,c,d){b.getRestaurantLocations().then(function(b){a.popularLocations=b.data}),a.filterLocations=function(a){c.save("locationSearch",JSON.stringify(a)),d.path("/restaurants")}}]).directive("resize",["$window",function(a){return function(b){var c=angular.element(a);b.getWindowDimensions=function(){return{w:c.width()}},b.$watch(b.getWindowDimensions,function(a){b.windowWidth=a.w,b.style=function(){return{width:a.w-100+"px"}}},!0),c.bind("resize",function(){b.$apply()})}}]),angular.module("clientApp").controller("NavigationController",["$scope","$location","$localStorage","AuthenticationService",function(a,b,c,d){a.isLoged=function(){return c.currentUser},a.isOpen=!1,a.isAdmin=function(){var a=c.currentUser.token,b=a.split(".")[1],d=b.replace("-","+").replace("_","/"),e=JSON.parse(atob(d));return"admin"===e.user_type.toString()},a.Logout=function(){d.Logout(),b.path("/")},a.isActive=function(a){return a===b.path()}}]),angular.module("clientApp").controller("LoginController",["$log","$scope","$location","AuthenticationService","SessionStorageService","$window",function(a,b,c,d,e,f){function g(){d.Logout()}b.$watchGroup(["email","password"],function(){b.error=null}),g(),b.loginSubmit=function(a){if(a){var g={email:b.email,password:b.password};b.loading=!0,d.Login(g.email,g.password,function(a){if(b.loading=!1,a===!0)if(e.get("goBackReservation")){e["delete"]("goBackReservation"),e.save("reservationStartTime",new Date);var d=JSON.parse(e.get("reservationInformation"));d.active=!0,e.save("reservationInformation",JSON.stringify(d)),f.history.back()}else e.get("goBack")?(e["delete"]("goBack"),f.history.back()):c.path("/");else b.error="Username or password is incorrect"})}}}]),angular.module("clientApp").controller("RegisterController",["$scope","$http","$location","AuthenticationService","AdminLocationService",function(a,b,c,d,e){e.getLocationsForSelect(function(b){400!==b.status&&(a.locations=b.data)}),a.$watchGroup(["email"],function(){a.error=null}),a.registerSubmit=function(b){if(b){var e={email:a.email,firstName:a.firstName,lastName:a.lastName,phone:a.phone,country:a.country.country_name,city:a.city.name,password:a.password};a.confirmPassword=null,a.password=null,a.loading=!0,d.Register(e,function(b){a.loading=!1,400!==b.status?(a.registerForm.$setPristine(!0),c.path("/login")):a.error=b.data})}}}]),angular.module("clientApp").factory("AuthenticationService",["$http","$localStorage","$log",function(a,b,c){function d(c,d,e){a.post("https://ridvansrestaurantserver.herokuapp.com/app/login",{email:c,password:d}).then(function(c){c.headers("Authorization")?(b.currentUser={currentUser:c,token:c.headers("Authorization")},a.defaults.headers.common.Authorization="Bearer "+c.headers("Authorization"),e(!0)):e(!1)})["catch"](function(){e(!1)})}function e(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/register",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a)})}function f(){delete b.currentUser,a.defaults.headers.common.Authorization=""}var g={};return g.Login=d,g.Register=e,g.Logout=f,g}]),angular.module("clientApp").controller("RestaurantController",["$http","$scope","$route","SessionStorageService","RestaurantService","$uibModalStack","$location","anchorSmoothScroll",function(a,b,c,d,e,f,g,h){function i(){f.dismissAll()}d["delete"]("reservationStartTime"),e.getAllRestaurantComments(JSON.parse(d.get("restaurantId")).id,function(a){b.reviews=a,b.noReviews=!(b.reviews.length>0)}),b.$on("$locationChangeStart",i),b.goTo=function(a){g.hash(a),h.scrollTo(a)},b.range=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},b.map={center:{latitude:9,longitude:18},zoom:8},b.marker={coordinates:{latitude:9,longitude:9}},e.getRestaurantDetails(JSON.parse(d.get("restaurantId")).id).then(function(a){b.restaurant=a.data,b.map={center:{latitude:b.restaurant.latitude,longitude:b.restaurant.longitude},zoom:8},b.marker={coordinates:{latitude:b.restaurant.latitude,longitude:b.restaurant.longitude}}})}]).controller("ReviewController",["$scope","$uibModal","$document","$location","$localStorage","RestaurantService","SessionStorageService",function(a,b,c,d,e,f,g){var h=this;h.animationsEnabled=!0,h.open=function(a,i){if(e.currentUser){var j=i?angular.element(c[0].querySelector(".modal-demo "+i)):void 0,k=b.open({animation:h.animationsEnabled,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"myModalContent.html",controller:"ModalInstanceController",controllerAs:"$ctrl",size:a,appendTo:j});k.result.then(function(a){a={comment:a.comment,mark:a.mark,idUser:e.currentUser.currentUser.data.id,idRestaurant:JSON.parse(g.get("restaurantId")).id},f.insertComment(a)},function(){})}else g.save("goBack",!0),d.path("/login")}}]).controller("ModalInstanceController",["$uibModalInstance","$scope",function(a,b){var c=this;b.rate=3,b.review="",c.ok=function(){var c={comment:b.review,mark:b.rate};a.close(c)},c.cancel=function(){a.dismiss("cancel")}}]).controller("MenuController",["$scope","RestaurantService","SessionStorageService",function(a,b,c){var d=this;a.arrayDishes=[],d.getMenu=function(d){b.getMenu(d.toString(),JSON.parse(c.get("restaurantId")).id).then(function(b){var c=b.data,d=[],e=[];c.forEach(function(a){d.includes(a.dishType)?e.forEach(function(b){b[0].dishType===a.dishType&&b.push(a)}):(d.push(a.dishType),e.push(new Array(0)),e[e.length-1].push(a))}),a.arrayDishes=e})},d.text="Show full menu",d.tick=!1,d.showMenu=function(){d.tick?(d.text="Show full menu",d.tick=!1,d.myHeight="350px"):(d.text="See less",d.tick=!0,d.myHeight="none")},d.getMenu("Breakfast")}]).service("anchorSmoothScroll",function(){this.scrollTo=function(a){function b(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0}var c=b(),d=document.getElementById(a).offsetTop+200,e=d>c?d-c:c-d;if(100>e)return void scrollTo(0,d);var f=18,g=Math.round(e/25),h=d>c?c+g:c-g,i=0;if(d>c)for(var j=c;d>j;j+=g)setTimeout("window.scrollTo(0, "+h+")",i*f),h+=g,h>d&&(h=d),i++;else for(var j=c;j>d;j-=g)setTimeout("window.scrollTo(0, "+h+")",i*f),h-=g,d>h&&(h=d),i++}}),angular.module("clientApp").service("ShareDataService",function(){var a;this.addData=function(b){a=b},this.getData=function(){return a}}),angular.module("clientApp").factory("RestaurantService",["$http",function(a){return{getMenu:function(b,c){return a.post("https://ridvansrestaurantserver.herokuapp.com/app/getRestaurantMenu",{idRestaurant:c,type:b})},getRandomRestaurants:function(){return a.get("https://ridvansrestaurantserver.herokuapp.com/app/getRandomRestaurants")},getRestaurantLocations:function(){return a.get("https://ridvansrestaurantserver.herokuapp.com/app/getRestaurantLocations")},getRestaurantDetails:function(b){return a.post("https://ridvansrestaurantserver.herokuapp.com/app/getRestaurantDetails",{Id:b})},insertComment:function(b){return a.post("https://ridvansrestaurantserver.herokuapp.com/app/insertComment",{mark:b.mark,comment:b.comment,idUser:b.idUser,idRestaurant:b.idRestaurant})},getAllRestaurantComments:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/getAllRestaurantComments",{idRestaurant:b}).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a.data)})},adminSaveRestaurant:function(b,c){b.id?a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/editRestaurant",b).then(function(a){c(a)}):a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/addRestaurant",b).then(function(a){c(a)})},restaurantMenuItems:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/adminMenuItems",b).then(function(a){c(a)})},getDishTypes:function(b){a.get("https://ridvansrestaurantserver.herokuapp.com/app/admin/getAllDishTypes").then(function(a){b(a)})},restaurantTables:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/adminRestaurantTables",b).then(function(a){c(a)})},restaurantReservationLengths:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/adminRestaurantReservationLengths",b).then(function(a){c(a)})},deleteRestaurant:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/adminDeleteRestaurant",b).then(function(a){c(a)})},getAdminDetails:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/adminGetDetails",b).then(function(a){c(a)})["catch"](function(a){400===a.status&&c(a)})}}}]),angular.module("clientApp").factory("SessionStorageService",["$window",function(a){return{get:function(b){return a.sessionStorage.getItem(b)},save:function(b,c){a.sessionStorage.setItem(b,c)},"delete":function(b){a.sessionStorage.removeItem(b)}}}]),angular.module("clientApp").controller("ReservationBarController",["$scope","SessionStorageService","ShareDataService","$location","ReservationService","$localStorage","$log",function(a,b,c,d,e,f,g){if(a.dateToday=new Date,a.maxDate=(new Date).setMonth(a.dateToday.getMonth()+4),a.minDate=new Date,a.selectedDate=new Date,a.numberMinutes=["15 minutes","30 minutes","45 minutes","60 minutes","90 minutes","120 minutes"],b.get("reservationInfo")){a.reservationInfo=JSON.parse(b.get("reservationInfo"));var h=a.reservationInfo.reservationDate.split("/"),i=a.reservationInfo.reservationHour.split(":");a.selectedDate=new Date(h[2],h[1]-1,h[0]),a.selectedTime=new Date(a.selectedDate.setHours(i[0],i[1],0)),a.selectedNumber=a.reservationInfo.persons,a.selectedLength=a.numberMinutes[a.numberMinutes.indexOf(a.reservationInfo.lengthOfStay+" minutes")],b["delete"]("reservationInfo")}else a.selectedDate.getDate()===a.dateToday.getDate()&&new Date<=(new Date).setHours(21,0,0)&&new Date>=(new Date).setHours(9,0,0)?a.minTime=(new Date).setHours((new Date).getHours()+1,0,0):(a.minTime=(new Date).setHours(9,0,0),a.minDate.setDate(a.dateToday.getDate()+1),a.selectedDate.setDate(a.dateToday.getDate()+1));a.$watch("selectedDate",function(){a.AvailabilityErrorColapsed=!0,a.AvailabilityInfoColapsed=!0,void 0!==a.selectedDate&&(a.selectedDate.getDate()===a.dateToday.getDate()&&new Date<=(new Date).setHours(21,0,0)&&new Date>=(new Date).setHours(9,0,0)?a.minTime=(new Date).setHours((new Date).getHours()+1,0,0):(a.minTime=(new Date).setHours(9,0,0),a.minDate.setDate(a.dateToday.getDate()+1)))}),a.$watchGroup(["selectedNumber","selectedTime","selectedLength"],function(){a.AvailabilityErrorColapsed=!0,a.AvailabilityInfoColapsed=!0}),a.AvailabilityErrorColapsed=!0,a.AvailabilityInfoColapsed=!0,a.checkReservation=function(){a.reservationCheckPayload={persons:a.selectedNumber,reservationDate:a.selectedDate.toLocaleDateString("en-GB"),reservationHour:a.selectedTime.getHours()+":"+a.selectedTime.getMinutes(),idRestaurant:JSON.parse(b.get("restaurantId")).id,dayName:new Date(a.selectedDate).toLocaleDateString("en-US",{weekday:"long"})},e.checkReservationAvailability(a.reservationCheckPayload,function(b){b.tablesLeft?(a.tablesLeft=b.tablesLeft,a.bestTimes=b.bestTime,a.AvailabilityInfoColapsed=!1):b?(a.AvailabilityErrorColapsed=!1,a.error=b):a.error="Something went wrong."}),a.proceedReservation=function(c){a.reservationCheckPayload.reservationHour=c,b.save("payloadApi",JSON.stringify(a.reservationCheckPayload)),a.reservationCheckPayload.reservationDate=a.selectedDate,a.reservationCheckPayload.persons=a.selectedNumber,f.currentUser&&(a.reservationCheckPayload.active=!0,b.save("reservationStartTime",new Date)),b.save("reservationInformation",JSON.stringify(a.reservationCheckPayload)),d.path("/reservation")}},a.searchHome="",a.homeSearch=function(){a.reservationCheckPayload={persons:a.selectedNumber,reservationDate:a.selectedDate.toLocaleDateString("en-GB"),reservationHour:a.selectedTime.getHours()+":"+a.selectedTime.getMinutes(),dayName:new Date(a.selectedDate).toLocaleDateString("en-US",{weekday:"long"})},a.filterPayload={searchText:a.searchHome,reservationInfo:a.reservationCheckPayload},b.save("homeSearch",JSON.stringify(a.filterPayload)),d.path("/restaurants")}}]).controller("ReservationController",["$scope","ShareDataService","$timeout","$templateCache","$window","$localStorage","$log","SessionStorageService","$location","RestaurantService","ReservationService",function(a,b,c,d,e,f,g,h,i,j,k){h.get("reservationInformation")||i.path("/"),a.information=JSON.parse(h.get("reservationInformation")),j.getRestaurantDetails(JSON.parse(h.get("restaurantId")).id).then(function(b){a.restaurantNameImage=b.data}),a.$on("$routeChangeStart",function(b){a.information.active&&(e.confirm("The reservation is not completed! Leave?")?(k.deleteTemporaryReservation(JSON.parse(h.get("tempReservationId"))),a.finishSession(),c.cancel(a.seconds)):b.preventDefault())}),a.userLogged=!1,f.currentUser&&(a.currentUser=f.currentUser.currentUser.data.id,a.userLogged=!0,JSON.parse(h.get("reservationInformation")).active&&!h.get("tempReservationId")&&k.makeTemporaryReservation(JSON.parse(h.get("payloadApi")),function(b){b.id?h.save("tempReservationId",b.id):(e.alert("The reservation has just been booked!"),a.finishSession(),c.cancel(a.seconds))}),a.information.active?(a.startTime=new Date(h.get("reservationStartTime")),a.counter=180-Math.floor(Math.abs(new Date-a.startTime)/1e3)):a.counter=0,a.request="",a.reservationSubmit=function(){c.cancel(a.seconds),a.loading=!0;var b={idReservation:JSON.parse(h.get("tempReservationId")),request:this.request};c(function(){k.updateToFixed(b,function(b){a.loading=!1}),a.finishSession(),e.history.back()},2e3)},a.onTimeout=function(){a.counter--,0===a.counter&&(k.deleteTemporaryReservation(JSON.parse(h.get("tempReservationId"))),a.finishSession(),c.cancel(a.seconds)),a.seconds=c(a.onTimeout,1e3)},a.finishSession=function(){h["delete"]("payloadApi"),h["delete"]("tempReservationId"),h["delete"]("reservationStartTime"),a.information.active=!1,h.save("reservationInformation",JSON.stringify(a.information))},a.seconds=c(a.onTimeout,1e3))}]).controller("SubmitReservationController",["$scope","$http","AuthenticationService","$location","ReservationService","SessionStorageService",function(a,b,c,d,e,f){a.information=JSON.parse(f.get("reservationInformation")),a.signInClick=function(){f.save("goBackReservation",!0),d.path("/login")},b.get("jsonexp/locations.json").then(function(b){a.locations=b.data}),a.registerSubmit=function(b){if(b){var e={email:a.email,firstName:a.firstName,lastName:a.lastName,phone:a.phone,country:a.country.country_name,city:a.city,password:a.password};a.confirmPassword=null,a.password=null,a.loading=!0,c.Register(e,function(b){a.loading=!1,b.status?a.error=b.data:(f.save("goBackReservation",!0),d.path("/login"))})}}}]),angular.module("clientApp").factory("ReservationService",["$http",function(a){return{checkReservationAvailability:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/checkReservationAvailability",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a.data)})},makeTemporaryReservation:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/makeReservation",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a.data)})},deleteTemporaryReservation:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/deleteReservation",{idReservation:b}).then(function(a){c(a)})["catch"](function(a){400===a.status&&c(a.data)})},updateToFixed:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/setReservationToFixed",b).then(function(a){c(a)})["catch"](function(a){400===a.status&&c(a.data)})},getUserReservations:function(b){a.get("https://ridvansrestaurantserver.herokuapp.com/app/getListOfReservationsForUser").then(function(a){b(a)})["catch"](function(a){400===a.status&&b(a.data)})}}}]),angular.module("clientApp").controller("RestaurantsController",["FilterFactoryServis","$scope","SessionStorageService","$location","$window","RestaurantService","GeometryService",function(a,b,c,d,e,f,g){function h(a){for(var b,c=[],d=document.getElementById(a).options.length,e=0;d>e;e++)b=document.getElementById(a).options[e],b.selected&&c.push(b.label);return c}f.getRestaurantLocations().then(function(a){b.popularLocations=a.data}),g.getCurrentPos().then(function(){b.disableRange=!1})["catch"](function(){b.disableRange=!0}),b.radiusHowMuch="1 kilometer",b.rangeGeo=0,b.radius=100,b.rangeController=function(){b.radius<=20&&(b.radiusHowMuch=b.radius/5+1+" kilometers",b.rangeGeo=1e3*(b.radius/5+1)),b.radius>25&&(b.rangeGeo=1e3*(b.radius-20),b.radiusHowMuch=b.radius-20+" kilometers"),0===b.radius&&(b.radiusHowMuch="Near you",b.rangeGeo=1e3),100===b.radius&&(b.radiusHowMuch="World-wide",b.rangeGeo=0)},b.rangeController(),b.filterLocations=function(a){b.searchText=a,b.filter()},b.range=function(a){for(var b=[],c=0;a>c;c++)b.push(c);return b},b.save=function(a){c.save("restaurantId",JSON.stringify({id:a.id})),b.alertHidden===!1&&c.save("reservationInfo",JSON.stringify(b.reservationInfo)),d.path("/restaurant")},b.searchText="",b.reservationInfo=null,b.pageNumber=1,b.maxSize=5,b.bigCurrentPage=1,b.rate=null,b.price=null,b.categoriesLeft=[],b.categoriesRight=[],b.alertHidden=!0,c.get("homeSearch")&&(b.alertHidden=!1,b.reservationInfo=JSON.parse(c.get("homeSearch")).reservationInfo,b.searchText=JSON.parse(c.get("homeSearch")).searchText,c["delete"]("homeSearch")),c.get("locationSearch")&&(b.searchText=JSON.parse(c.get("locationSearch")),c["delete"]("locationSearch")),b.closeAlert=function(){b.alertHidden=!0,b.reservationInfo=null,b.filter()},b.filter=function(){b.loading=!0,b.searchPayload={itemsPerPage:9,pageNumber:b.bigCurrentPage,searchText:b.searchText,reservationInfo:b.reservationInfo,mark:b.rate,priceRange:b.price,categories:h("categorymultipleright").concat(h("categorymultipleleft"))},0!==b.rangeGeo?g.getCurrentPos().then(function(c){b.searchPayload.geometry={radius:b.rangeGeo,latitude:c.coords.latitude,longitude:c.coords.longitude},a.getFilterResult(b.searchPayload,function(a){0!==a.numberOfPages?(b.numPages=9*a.numberOfPages,b.restaurants=a.restaurants,b.noResults=!1):b.noResults=!0,e.scrollTo(0,0),b.loading=!1})}):a.getFilterResult(b.searchPayload,function(a){0!==a.numberOfPages?(b.numPages=9*a.numberOfPages,b.restaurants=a.restaurants,b.noResults=!1):b.noResults=!0,e.scrollTo(0,0),b.loading=!1})},b.filter(),document.getElementById("categorymultipleright").onmousedown=function(a){a.preventDefault(),a.target.selected=!a.target.selected},document.getElementById("categorymultipleleft").onmousedown=function(a){a.preventDefault(),a.target.selected=!a.target.selected},a.getAllCategories(function(a){b.categories={left:a.splice(0,Math.ceil(a.length/2)),right:a}})}]),angular.module("clientApp").factory("FilterFactoryServis",["$http",function(a){return{getFilterResult:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/getRestaurantsByFilter",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a.data)})},getAllCategories:function(b){a.get("https://ridvansrestaurantserver.herokuapp.com/app/getAllCategories").then(function(a){b(a.data)})["catch"](function(a){400===a.status&&b(a.data)})},getAdminFilter:function(b,c,d){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/getFiltered"+b,c).then(function(a){d(a)})["catch"](function(a){400===a.status&&d(a)})}}}]),angular.module("clientApp").controller("MyReservationsController",["ReservationService","$scope","$window",function(a,b,c){b.noReservationsActive=!1,b.noReservationsPast=!1,b.reservation=null,b.loading=!0,a.getUserReservations(function(a){b.userReservations=a.data,b.loading=!1,0===b.userReservations.activeReservations.length&&(b.noReservationsActive=!0),0===b.userReservations.pastReservations.length&&(b.noReservationsPast=!0)}),b.pick=function(a){b.reservation=a,c.scrollTo(0,0)}}]),angular.module("clientApp").controller("AdminPanelController",["$scope","FilterFactoryServis","AdminCommonService",function(a,b,c){a.activeTab=0,c.getAdministrationCounters(function(b){a.counters=b,a.loading=!1}),a.changeActive=function(b){a.activeTab=b}}]).controller("AdminRestaurantManipulationController",["$scope","FilterFactoryServis","$log","$window","fileReader","AdminLocationService","AdminCategoryService","FirestoreService","RestaurantService",function(a,b,c,d,e,f,g,h,i){function j(){this.tablesPayload={addQueue:[],editQueue:[],deleteQueue:[],restaurantId:""},this.newTables=[],this.tablesList=[{id:"Select type of tables",label:"Select type of tables",numberGuests:0,disabled:!0},{id:"Tables for one",label:"Tables for one",numberGuests:1},{id:"Tables for two",label:"Tables for two",numberGuests:2},{id:"Tables for three",label:"Tables for three",numberGuests:3},{id:"Tables for four",label:"Tables for four",numberGuests:4},{id:"Tables for five",label:"Tables for five",numberGuests:5},{id:"Tables for six",label:"Tables for six",numberGuests:6},{id:"Tables for seven",label:"Tables for seven",numberGuests:7},{id:"Tables for eight",label:"Tables for eight",numberGuests:8},{id:"Tables for nine",label:"Tables for nine",numberGuests:9},{id:"Tables for ten",label:"Tables for ten",numberGuests:10}],this.addNewTables=function(){this.newTables.push({tableType:this.tablesList[0].label,amount:""})},this.removeTables=function(a){this.newTables[a].original&&(this.tablesPayload.deleteQueue.push(this.newTables[a]),this.tablesPayload.editQueue.indexOf(this.newTables[a])>=0&&this.tablesPayload.editQueue.splice(this.tablesPayload.editQueue.indexOf(this.newTables[a]),1)),this.changeDisabled(this.newTables[a].tableType,!1),this.newTables.splice(a,1)},this.findTableType=function(a){var b;return this.tablesList.forEach(function(c){c.numberGuests===a&&(b=c.label)}),b},this.typeChanged=function(a,b){this.addIfRemoved(a),this.changeDisabled(a,!0),this.changeDisabled(b,!1)},this.addIfRemoved=function(a){this.tablesPayload.deleteQueue.forEach(function(b){b.tableType===a&&(this.newTables.forEach(function(c){c.tableType===a&&(c.amount=b.original,c.original=b.original)}),this.tablesPayload.deleteQueue.splice(this.tablesPayload.deleteQueue.indexOf(b),1))},this)},this.changeDisabled=function(a,b){this.typeIndex=0,a&&"Select type of tables"!==a&&(this.tablesList.forEach(function(b,c){b.label===a&&(this.typeIndex=c)},this),this.tablesList[this.typeIndex].disabled=b)}}function k(){this.dishesPayload={addQueue:[],editQueue:[],deleteQueue:[],restaurantId:""},this.dishesList=[],this.addNewDish=function(a){this.dishesList.push({name:"",description:"",price:"",dishType:"Type",menuType:a})},this.removeDish=function(a){this.dishesList[a].id&&(this.dishesPayload.deleteQueue.push(this.dishesList[a].id),this.dishesPayload.editQueue.indexOf(this.dishesList[a])>=0&&this.dishesPayload.editQueue.splice(this.dishesPayload.editQueue.indexOf(this.dishesList[a]),1)),this.dishesList.splice(a,1)},this.editDish=function(a){this.dishesList[a].id&&(this.dishesPayload.editQueue.indexOf(this.dishesList[a])>=0?this.dishesPayload.editQueue[this.dishesPayload.editQueue.indexOf(this.dishesList[a])]=this.dishesList[a]:this.dishesPayload.editQueue.push(this.dishesList[a]))}}function l(){this.lengths=[{id:"Select number of Guests",label:"Select number of Guests",numberGuests:0,disabled:!0},{id:"One person",label:"One person",numberGuests:1},{id:"Two people",label:"Two people",numberGuests:2},{id:"Three people",label:"Three people",numberGuests:3},{id:"Four people",label:"Four people",numberGuests:4},{id:"Five people",label:"Five people",numberGuests:5},{id:"Six people",label:"Six people",numberGuests:6},{id:"Seven people",label:"Seven people",numberGuests:7},{id:"Eight people",label:"Eight people",numberGuests:8},{id:"Nine people",label:"Nine people",numberGuests:9},{id:"Ten people",label:"Ten people",numberGuests:10}],this.pickedLengths=[],this.originalLengths=[],this.reservationLengthsPayload={addQueue:[],editQueue:[],deleteQueue:[],restaurantId:""},this.addLength=function(){this.pickedLengths.push({label:this.lengths[0].label,guestNumber:this.lengths[0].numberGuests,workday:{morning:"",day:"",evening:""},weekend:{morning:"",day:"",evening:""}})},this.addExistingLength=function(a){this.pickedLengths.push({id:a.id,label:this.lengths[a.guestNumber].label,guestNumber:a.guestNumber,workday:{id:a.stayByDays[0].id,morning:a.stayByDays[0].morning,day:a.stayByDays[0].day,evening:a.stayByDays[0].evening},weekend:{id:a.stayByDays[1].id,morning:a.stayByDays[1].morning,day:a.stayByDays[1].day,evening:a.stayByDays[1].evening}}),this.changeDisabledLength(this.lengths[a.guestNumber].label,!0)},this.removeLength=function(a){this.pickedLengths[a].id&&(this.reservationLengthsPayload.deleteQueue.push(this.pickedLengths[a].id),this.reservationLengthsPayload.editQueue.splice(this.reservationLengthsPayload.editQueue.indexOf(this.pickedLengths[a]),1)),this.changeDisabledLength(this.pickedLengths[a].label,!1),this.pickedLengths.splice(a,1)},this.changeNumber=function(a){this.lengths.forEach(function(b){b.label===a.label&&(this.pickedLengths[this.pickedLengths.indexOf(a)].guestNumber=b.numberGuests)},this),this.addIfRemoved(this.pickedLengths[this.pickedLengths.indexOf(a)])},this.addIfRemoved=function(a){var b;this.originalLengths.forEach(function(c){c.guestNumber===a.guestNumber&&(b=c)},this);var c;this.reservationLengthsPayload.deleteQueue.forEach(function(d){d===b.id&&(a.id=b.id,a.label=this.lengths[b.guestNumber].label,a.guestNumber=b.guestNumber,a.workday.morning=b.stayByDays[0].morning,a.workday.day=b.stayByDays[0].day,a.workday.evening=b.stayByDays[0].evening,a.workday.id=b.stayByDays[0].id,a.weekend.morning=b.stayByDays[1].morning,a.weekend.day=b.stayByDays[1].day,a.weekend.evening=b.stayByDays[1].evening,a.weekend.id=b.stayByDays[1].id,c=d)},this),c&&this.reservationLengthsPayload.deleteQueue.splice(this.reservationLengthsPayload.deleteQueue.indexOf(c),1)},this.lengthsChanged=function(a){a.id&&(this.pickedLengths[this.pickedLengths.indexOf(a)].changed=!0)},this.removeIdIfThereIs=function(a){this.pickedLengths[a].id&&(this.reservationLengthsPayload.deleteQueue.push(this.pickedLengths[a].id),this.reservationLengthsPayload.editQueue.splice(this.reservationLengthsPayload.editQueue.indexOf(this.pickedLengths[a]),1)),delete this.pickedLengths[a].id,delete this.pickedLengths[a].workday.id,delete this.pickedLengths[a].weekend.id},this.lengthChanged=function(a,b,c){this.removeIdIfThereIs(this.pickedLengths.indexOf(c)),this.changeDisabledLength(a,!0),this.changeDisabledLength(b,!1)},this.changeDisabledLength=function(a,b){this.lengthIndex=0,a&&"Select number of Guests"!==a&&(this.lengths.forEach(function(b,c){b.label===a&&(this.lengthIndex=c)},this),this.lengths[this.lengthIndex].disabled=b)}}var m=this;a.maxSize=5,a.searchText="",a.bigCurrentPage=1,a.filter=function(){a.loading=!0,a.searchPayload={itemsPerPage:9,pageNumber:a.bigCurrentPage,searchText:a.searchText},b.getAdminFilter("Restaurants",a.searchPayload,function(b){0!==b.data.numberOfPages?(a.filterResults=b.data.restaurants,a.numPages=9*b.data.numberOfPages,a.results=!0):a.results=!1,d.scrollTo(0,0),a.loading=!1})},a.filter(),a.deleteRestaurant=function(b){i.deleteRestaurant({id:b.id},function(){a.filter()})},a.view=!1,a.changeView=function(b,c){a.view=!0,a.add=!1,a.edit=!1,"Edit"===b?(a.edit=!0,i.getAdminDetails({id:c.id},function(b){a.idRestaurant=b.data.basicDetails.id,a.marker.coordinates.longitude=b.data.basicDetails.longitude,a.marker.coordinates.latitude=b.data.basicDetails.latitude,a.map.center.latitude=b.data.basicDetails.latitude,a.map.center.longitude=b.data.basicDetails.longitude,m.restaurantName=b.data.basicDetails.restaurantName,m.priceRange=a.priceRanges[b.data.basicDetails.priceRange-1],m.resDescription=b.data.basicDetails.description,a.locations.forEach(function(c){c.city_names.forEach(function(d){d.name===b.data.location&&(a.country=c,m.city=d)})}),b.data.categories.forEach(function(b){a.pickedCategories.push(b.name),a.pickedCatPayload.push(b.id)}),m.defaultLength=b.data.basicDetails.defaultStay,m.imageLogoSrc=b.data.basicDetails.imageFileName,m.imageCoverSrc=b.data.basicDetails.coverFileName,a.imageCoverUrl=b.data.basicDetails.coverFileName,a.imageLogoUrl=b.data.basicDetails.imageFileName,
a.logoChanged=!1,a.coverChanged=!1,a.dishes.dishesList=b.data.dishes,m.tables.newTables=[],b.data.tablesNumbers.forEach(function(a){var b=m.tables.findTableType(a.tableType);m.tables.newTables.push({tableType:b,amount:a.amount,original:a.amount}),m.tables.changeDisabled(b,!0)}),a.reservations.originalLengths=b.data.lengths,b.data.lengths.forEach(function(b){a.reservations.addExistingLength(b)})})):a.add=!0},a.cancel=function(){a.view=!1,m.tables=new j,a.dishes=new k,a.reservations=new l,m.restaurantName=null,m.priceRange=null,m.resDescription=null,a.country=null,m.city=null,a.pickedCategories=[],a.pickedCatPayload=[],m.defaultLength=null,m.imageLogoSrc=null,m.imageCoverSrc=null,a.restaurantForm.$setPristine(),a.submited=!1,a.success=null,a.logoChanged=!1,a.coverChanged=!1,m.errorTables=[]},a.priceRanges=["Low","Lower Medium","Medium","Upper Medium","High"],f.getLocationsForSelect(function(b){400!==b.status&&(a.locations=b.data)}),g.getAllCategories(function(b){400!==b.status&&(a.categories=b.data)}),a.pickedCatPayload=[],a.pickedCategories=[],a.pickCategory=function(b){-1===a.pickedCategories.indexOf(b.name)&&(a.pickedCategories.push(b.name),a.pickedCatPayload.push(b.id))},a.deleteCategory=function(b){a.pickedCategories.splice(b,1),a.pickedCatPayload.splice(b,1)},a.map={center:{latitude:43.85626,longitude:18.41308},zoom:8},a.marker={coordinates:{latitude:43.85626,longitude:18.41308},events:{click:function(b,c,d){a.marker.coordinates.latitude=d[0].latLng.lat(),a.marker.coordinates.longitude=d[0].latLng.lng()}}},a.imageLogoUrl="",a.imageCoverUrl="",m.imageLogoSrc=null,m.imageCoverSrc=null,a.$watch("rest.imageLogoSrc",function(b,c){b&&(a.edit?null!==c&&(a.logoChanged=!0):a.logoChanged=!0)}),a.$watch("rest.imageCoverSrc",function(b,c){b&&(a.edit?null!==c&&(a.coverChanged=!0):a.coverChanged=!0)}),m.tables=new j,a.finishPayloadTables=function(){m.tables.tablesPayload.deleteQueue.forEach(function(a){m.tables.tablesList.forEach(function(b){b.label===a.tableType&&(a.tableType=b.numberGuests)})}),m.tables.newTables.forEach(function(a){m.tables.tablesList.forEach(function(b){b.label===a.tableType&&(a.original||m.tables.tablesPayload.addQueue.push({tableType:b.numberGuests,amount:a.amount}),a.original&&a.original<a.amount&&m.tables.tablesPayload.addQueue.push({tableType:b.numberGuests,amount:a.amount-a.original}),a.original&&a.original>a.amount&&m.tables.tablesPayload.deleteQueue.push({tableType:b.numberGuests,amount:a.original-a.amount}))})})},m.tables.addNewTables(),m.tables.addNewTables(),m.tables.addNewTables(),a.addMenu=function(){a.dishes.dishesList.forEach(function(b){b.id||a.dishes.dishesPayload.addQueue.push(b)})},a.dishes=new k,i.getDishTypes(function(b){a.dishTypes=b.data}),a.radioModel="Breakfast",a.dishes.addNewDish("Breakfast"),a.dishes.addNewDish("Breakfast"),a.dishes.addNewDish("Breakfast"),a.reservations=new l,a.finishReservationsPayload=function(){a.reservations.pickedLengths.forEach(function(b){b.id||a.reservations.reservationLengthsPayload.addQueue.push(b),b.id&&b.changed&&a.reservations.reservationLengthsPayload.editQueue.push(b)})},a.changeLoc=function(){m.restLocInv=!1},a.changePrice=function(){m.restPriceInv=!1},a.$watchCollection("pickedCategories",function(){m.restCatInv=!1});var n=function(){0===a.pickedCatPayload.length&&(m.restCatInv=!0),-1===a.priceRanges.indexOf(m.priceRange)&&(m.restPriceInv=!0),m.city||(m.restLocInv=!0),a.imageLogoUrl||(m.logoInv=!0),a.imageCoverUrl||(m.coverInv=!0)};m.errorTables=[],a.addRestaurant=function(b){a.submited=!0,n(),b&&a.pickedCatPayload.length>0&&validateDishes()&&(a.progress=15,a.currentTask="Uploading images...",h.uploadImage(m.imageLogoSrc,a.logoChanged,function(b){a.logoChanged&&(a.imageLogoUrl=b),a.progress=30,h.uploadImage(m.imageCoverSrc,a.coverChanged,function(b){a.coverChanged&&(a.imageCoverUrl=b),a.progress=50,a.currentTask="Saving restaurant...",a.basicInfoPayload={longitude:a.marker.coordinates.longitude,latitude:a.marker.coordinates.latitude,restaurantName:m.restaurantName,priceRange:a.priceRanges.indexOf(m.priceRange)+1,location:m.city.id,description:m.resDescription,imageFileName:a.imageLogoUrl,coverFileName:a.imageCoverUrl,categories:a.pickedCatPayload,defaultStay:m.defaultLength},a.edit&&(a.basicInfoPayload.id=a.idRestaurant),i.adminSaveRestaurant(a.basicInfoPayload,function(b){a.progress=60,a.currentTask="Adding menu...",a.addMenu(),a.dishes.dishesPayload.restaurantId=b.data.id,i.restaurantMenuItems(a.dishes.dishesPayload,function(){a.progress=70,a.currentTask="Adding reservation lengths...",a.finishReservationsPayload(),a.reservations.reservationLengthsPayload.restaurantId=a.dishes.dishesPayload.restaurantId,i.restaurantReservationLengths(a.reservations.reservationLengthsPayload,function(){a.progress=80,a.currentTask="Adding tables...",a.finishPayloadTables(),m.tables.tablesPayload.restaurantId=a.dishes.dishesPayload.restaurantId,i.restaurantTables(m.tables.tablesPayload,function(b){a.progress=100,a.currentTask="Finalising...",a.success="Restaurant saved successfully.",b.data.forEach(function(a){a.amount>0&&m.errorTables.push({type:a.type,amount:a.amount})})})})})})})}))}}]).controller("AdminLocationManipulationController",["$scope","FilterFactoryServis","$window","AdminLocationService",function(a,b,c,d){a.maxSize=5,a.searchText="",a.bigCurrentPage=1,a.filter=function(){a.loading=!0,a.searchPayload={itemsPerPage:9,pageNumber:a.bigCurrentPage,searchText:a.searchText},b.getAdminFilter("Locations",a.searchPayload,function(b){0!==b.data.numberOfPages?(a.filterResults=b.data.locations,a.numPages=9*b.data.numberOfPages,a.results=!0):a.results=!1,c.scrollTo(0,0),a.loading=!1})},a.filter(),a.deleteLocation=function(b){d.deleteLocation({id:b.id},function(b){a.filter()})},a.$watch("locationName",function(){a.success="",a.error=""}),a.view=!1,a.currentCategory=null,a.categoryName="",a.changeView=function(b,c){a.view=!0,a.add=!1,a.edit=!1,a.currentLocation=null,a.locationName="",a.countryName="","Edit"===b?(a.edit=!0,a.currentLocation=c,a.id=c.id,a.locationName=c.name,a.countryName=c.country):a.add=!0},a.cancel=function(){a.view=!1},a.changeLocation=function(b){switch(a.success="",a.error="",b){case"Add":""!==a.locationName&&d.addLocation({name:a.locationName,country:a.countryName},function(b){400!==b.status?a.success="Location added successfully.":a.error=b.data});break;case"Edit":a.locationName!==a.currentLocation.name&&""!==a.locationName?d.editLocation({id:a.id,name:a.locationName,country:a.countryName},function(b){400!==b.status?(a.success="Location edited successfully.",a.filter()):a.error=b.data}):a.error="Location already has the same name!"}}}]).controller("AdminCategoryManipulationController",["$scope","AdminCategoryService","FilterFactoryServis","$window",function(a,b,c,d){a.maxSize=5,a.searchText="",a.bigCurrentPage=1,a.filter=function(){a.loading=!0,a.searchPayload={itemsPerPage:9,pageNumber:a.bigCurrentPage,searchText:a.searchText},c.getAdminFilter("Categories",a.searchPayload,function(b){0!==b.data.numberOfPages?(a.filterResults=b.data.categories,a.numPages=9*b.data.numberOfPages,a.results=!0):a.results=!1,d.scrollTo(0,0),a.loading=!1})},a.filter(),a.deleteCategory=function(c){b.deleteCategory({id:c.id},function(b){a.filter()})},a.$watch("categoryName",function(){a.success="",a.error=""}),a.view=!1,a.currentCategory=null,a.categoryName="",a.changeView=function(b,c){a.view=!0,a.add=!1,a.edit=!1,a.currentCategory=null,a.categoryName="","Edit"===b?(a.edit=!0,a.currentCategory=c,a.categoryName=c.name):a.add=!0},a.cancel=function(){a.view=!1},a.changeCategory=function(c){switch(a.success="",a.error="",c){case"Add":""!==a.categoryName&&b.addCategory({name:a.categoryName},function(b){400!==b.status?a.success="Category added successfully.":a.error=b.data});break;case"Edit":a.categoryName!==a.currentCategory.name&&""!==a.categoryName?b.editCategory({name:a.categoryName,id:a.currentCategory.id},function(b){400!==b.status?(a.success="Category edited successfully.",a.filter()):a.error=b.data}):a.error="Category already has the same name!"}}}]).controller("AdminUserManipulationController",["$scope","FilterFactoryServis","$window","$http","AuthenticationService","AdminUserService","AdminLocationService",function(a,b,c,d,e,f,g){a.maxSize=5,a.searchText="",a.bigCurrentPage=1,a.filter=function(){a.loading=!0,a.searchPayload={itemsPerPage:9,pageNumber:a.bigCurrentPage,searchText:a.searchText},b.getAdminFilter("Users",a.searchPayload,function(b){0!==b.data.numberOfPages?(a.filterResults=b.data.users,a.numPages=9*b.data.numberOfPages,a.results=!0):a.results=!1,c.scrollTo(0,0),a.loading=!1})},a.filter(),a.view=!1,a.add=!1,a.changeView=function(b,c){a.view=!0,a.add=!1,a.edit=!1,a.currentUser=null,a.email=null,a.firstName=null,a.lastName=null,a.phone=null,a.id=null,"Edit"===b?(a.edit=!0,a.currentUser=c,a.email=c.email,a.firstName=c.user_data.firstName,a.lastName=c.user_data.lastName,a.phone=c.user_data.phone,a.id=c.id,a.locations.forEach(function(b){b.city_names.forEach(function(d){d.id===c.user_data.location&&(a.country=b,a.city=d)})})):a.add=!0},a.cancel=function(){a.filter(),a.view=!1,a.error=!1,a.editPassword=!1,a.country=null,a.city=null},a.$watch("email",function(){a.success=null,a.error=null},!0),a.addSubmit=function(b){if(b){var c={email:a.email,firstName:a.firstName,lastName:a.lastName,phone:a.phone,country:a.country.country_name,city:a.city.name,password:a.password};a.confirmPassword=null,a.password=null,a.loading=!0,a.add?e.Register(c,function(b){a.loading=!1,400!==b.status?(a.registerForm.$setPristine(!0),a.firstName=null,a.lastName=null,a.phone=null,a.success="Registration successful!",a.filter(),a.country=null,a.city=null):a.error=b.data}):(c.id=a.id,f.editUser(c,function(b){a.loading=!1,400!==b.status?(a.success="User updated successfully successful!",a.country=null,a.city=null):a.error=b.data}))}},a.deleteUser=function(b){f.deleteUser({id:b.id},function(b){a.filter()})},g.getLocationsForSelect(function(b){400!==b.status&&(a.locations=b.data)})}]).directive("ngFileSelect",["fileReader","$timeout",function(a,b){return{scope:{ngModel:"="},link:function(c,d){function e(d){a.readAsDataUrl(d,c).then(function(a){b(function(){c.$apply(function(){c.ngModel=a})})})}d.bind("change",function(a){var b=(a.srcElement||a.target).files[0];e(b)})}}}]).factory("fileReader",["$q",function(a){var b=function(a,b,c){return function(){c.$apply(function(){b.resolve(a.result)})}},c=function(a,b,c){return function(){c.$apply(function(){b.reject(a.result)})}},d=function(a,b){return function(a){b.$broadcast("fileProgress",{total:a.total,loaded:a.loaded})}},e=function(a,e){var f=new FileReader;return f.onload=b(f,a,e),f.onerror=c(f,a,e),f.onprogress=d(f,e),f},f=function(b,c){var d=a.defer(),f=e(d,c);return f.readAsDataURL(b),d.promise};return{readAsDataUrl:f}}]),angular.module("clientApp").factory("AdminCommonService",["$http",function(a){return{getAdministrationCounters:function(b){a.get("https://ridvansrestaurantserver.herokuapp.com/app/admin/getAdministrationCounters").then(function(a){b(a.data)})["catch"](function(a){return 400===a.status?a.data:void 0})}}}]),angular.module("clientApp").factory("AdminLocationService",["$http",function(a){return{addLocation:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/addLocation",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a)})},editLocation:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/editLocation",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a)})},getLocationDetails:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/getLocationDetails",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a)})},getLocationsForSelect:function(b){a.get("https://ridvansrestaurantserver.herokuapp.com/app/getLocationsForSelect").then(function(a){b(a)})["catch"](function(a){400===a.status&&b(a)})},deleteLocation:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/deleteLocation",b).then(function(a){c(a)})}}}]),angular.module("clientApp").factory("AdminCategoryService",["$http",function(a){return{addCategory:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/addCategory",b).then(function(a){c(a)})["catch"](function(a){c(a)})},editCategory:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/editCategory",b).then(function(a){c(a)})["catch"](function(a){400===a.status&&c(a)})},getCategoryDetails:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/getCategoryDetails",b).then(function(a){c(a)})["catch"](function(a){400===a.status&&c(a)})},getAllCategories:function(b){a.get("https://ridvansrestaurantserver.herokuapp.com/app/getAllCategories").then(function(a){b(a)})["catch"](function(a){400===a.status&&b(a)})},deleteCategory:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/deleteCategory",b).then(function(a){c(a)})}}}]),angular.module("clientApp").factory("AdminUserService",["$http",function(a){return{editUser:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/editUser",b).then(function(a){c(a.data)})["catch"](function(a){400===a.status&&c(a)})},deleteUser:function(b,c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/admin/adminDeleteUser",b).then(function(a){c(a)})["catch"](function(a){400===a.status&&c(a)})}}}]),angular.module("clientApp").factory("FirestoreService",["$firebaseStorage","$log",function(a,b){function c(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}var d=function(a){for(var b=a.split(","),c=b[0].split(":")[1].split(";")[0],d=atob(b[1]),e=d.length,f=new Uint8Array(e);e--;)f[e]=d.charCodeAt(e);return new Blob([f],{type:c})},e=function(b,e,f){if(e){var g=firebase.storage().ref("restaurant_images/"+c()),h=a(g),i=h.$put(d(b));i.$complete(function(a){a.ref.getDownloadURL().then(function(a){f(a)})})}else f()},f=function(b){var c=firebase.storage().ref(b),d=a(c);d.$delete()};return{uploadImage:e,deleteImage:f}}]),angular.module("clientApp").factory("GeometryService",["$http","$q","$window",function(a,b,c){function d(){var a=b.defer();return c.navigator.geolocation?c.navigator.geolocation.getCurrentPosition(function(b){a.resolve(b)},function(b){a.reject(b)}):a.reject("Geolocation not supported."),a.promise}return{getNumberForHome:function(b){d().then(function(c){a.post("https://ridvansrestaurantserver.herokuapp.com/app/getCloseRestNumber",{longitude:c.coords.longitude,latitude:c.coords.latitude,radius:15e3}).then(function(a){b(a)})})["catch"](function(){b(-1)})},getCurrentPos:d}}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/admin.html",'<body> <div class="container text-center container-admin"> <uib-tabset class="mainAdminTabs" active="activeTab"> <uib-tab index="0" heading="Dashboard"> {{active}} <div class="row"> <div class="col-xs-12 col-sm-4"> <div class="admin-dash-card"> <img src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> <h2>{{counters.restaurantsNumber}}</h2> <h5>Restaurants</h5> <button class="btn btn-block btn-home" ng-click="changeActive(1)">Manage Restaurants</button> </div> </div> <div class="col-xs-12 col-sm-4"> <div class="admin-dash-card"> <img src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> <h2>{{counters.locationsNumber}}</h2> <h5>Locations</h5> <button class="btn btn-block btn-home" ng-click="changeActive(2)">Manage Locations</button> </div> </div> <div class="col-xs-12 col-sm-4"> <div class="admin-dash-card"> <img src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> <h2>{{counters.usersNumber}}</h2> <h5>Users</h5> <button class="btn btn-block btn-home" ng-click="changeActive(4)">Manage Users</button> </div> </div> </div> </uib-tab> <uib-tab index="1" heading="Restaurants"> <div ng-controller="AdminRestaurantManipulationController as rest"> <div ng-show="!view"> <div class="card-admin-tabs"> <ul class="list-inline text-left admin-tabs"> <li> <h5 class="admin-tab-name">Restaurants :</h5> </li> <li class="a-admin float-right"> <button class="btn btn-block admin-add-button" ng-click="changeView(\'Add\')">Add Restaurant</button> </li> <li class="a-admin float-right"> <input type="text" class="admin-search" ng-model="searchText" ng-change="filter()" maxlength="40" placeholder="Search"> </li> </ul> </div> <div class="container-table"> <table class="table table-bordered"> <thead> <tr> <th>Name</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="row in filterResults"> <td>{{row.restaurantName}}</td> <td class="icon-col"> <div class="btn-group logout-dropdown-div admin-delete" uib-dropdown auto-close="outsideClick" is-open="isOpen"> <span class="glyphicon glyphicon-pencil table-icon" ng-click="changeView(\'Edit\', row)"></span> <a uib-dropdown-toggle ng-disabled="disabled" class="glyphicon glyphicon-trash table-icon"></a> <ul class="dropdown-menu logout-dropdown" uib-dropdown-menu role="menu" aria-labelledby="single-button"> <li> <h4> Are you sure you want to delete? </h4> </li> <li> <ul class="list list-inline"> <li> <button class="logout-yes-button btn-block btn-home btn" ng-click="deleteRestaurant(row); isOpen = false;">Yes</button> </li> <li> <button class="logout-no-button btn-block btn-home btn" ng-click="isOpen = false">No</button> </li> </ul> </li> </ul> </div> </td> </tr> </tbody> </table> </div> <ul uib-pagination total-items="numPages" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true" ng-change="filter()"></ul> </div> <div ng-show="view"> <form name="restaurantForm" class="admin-add-rest-form" ng-submit="addRestaurant(restaurantForm.$valid)" novalidate> <uib-tabset active="activeForm"> <!--Basic details--> <uib-tab index="0" heading="Basic details"> <div class="tab-pane-admin"> <ng-form name="basicDetailsForm"> <div class="row"> <div class="col-xs-12 col-sm-6 col-logo"> <div class="form-label">Add logo/profile</div> <input required type="file" ng-file-select="onFileSelect($files)" id="logoSrc" name="logoSrc" class="inputfile" ng-model="rest.imageLogoSrc"> <label for="logoSrc" class="uploadlogo" ng-show="!rest.imageLogoSrc" ng-class="{\'error-form\' : rest.logoInv && submited }"> <img class="uploadcloud" src="../images/upload-cloud.dab049fb.png"> Upload Logo/Profile </label> <label for="logoSrc" class="uploadlogo" ng-show="rest.imageLogoSrc"> <img class="uploadedImage" ng-src="{{rest.imageLogoSrc}}"> </label> </div> <div class="col-xs-12 col-sm-6"> <div class="form-label">Add cover</div> <input required type="file" ng-file-select="onFileSelect($files)" id="coverSrc" class="inputfile" ng-model="rest.imageCoverSrc"> <label for="coverSrc" class="uploadcover" ng-show="!rest.imageCoverSrc" ng-class="{\'error-form\' : rest.coverInv && submited}"> <img class="uploadcloud" src="../images/upload-cloud.dab049fb.png"> Upload Cover Photo </label> <label for="coverSrc" class="uploadcover" ng-show="rest.imageCoverSrc"> <img class="uploadedImage" ng-src="{{rest.imageCoverSrc}}"> </label> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="form-label">Name</div> <input name="restaurantName" class="login-form-control input-lg input-admin-forms input-admin-forms" type="text" id="restaurantName" placeholder="Restaurant name" ng-model="rest.restaurantName" required ng-class="{\'error-form\' :  basicDetailsForm.restaurantName.$error.required && submited}"> </div> <div class="col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6 col-inside"> <div class="form-label">Country</div> <select class="custom-select login-form-control input-lg input-admin-forms" ng-model="country" ng-options="c.country_name for c in locations" required ng-class="{\'error-form\' : rest.restLocInv && submited}"> <option value="" disabled selected>Country</option> </select> </div> <div class="col-xs-12 col-sm-6 col-inside"> <div class="form-label">Location</div> <select class="login-form-control input-lg input-admin-forms" ng-model="rest.city" ng-options="d.name.valueOf() for d in country.city_names" required ng-class="{\'error-form\' : rest.restLocInv && submited}" ng-change="changeLoc()"> <option value="" disabled selected>City</option> </select> </div> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="form-label">Categories</div> <div class="categories-add-restaurant-panel" ng-class="{\'error-form\' : rest.restCatInv && submited}"> <ul class="list-inline text-left"> <li ng-repeat="category in pickedCategories"> <button class="btn btn-added-category" ng-click="deleteCategory($index)"> {{category}} <span class="glyphicon glyphicon-remove"></span> </button> </li> </ul> </div> <div class="col-xs-12 col-sm-offset-9 col-sm-3 no-padding"> <select class="admin-add-categories-select login-form-control input-lg input-admin-forms" ng-model="pickedCategory" ng-options="category.name for category in categories track by category.name" ng-change="pickCategory(pickedCategory); " ng-class="{\'error-form\' : rest.restCatInv && submited}"> <option value="" disabled selected>Categories</option> </select> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="form-label">Description</div> <textarea name="resDescription" rows="5" class="login-form-control input-lg" type="text" id="resDescription" placeholder="Enter a description" ng-model="rest.resDescription" required ng-class="{\'error-form\' :  basicDetailsForm.resDescription.$error.required && submited}"></textarea> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="form-label">Coordinates (Place a marker)</div> <div class="admin-map"> <ui-gmap-google-map center="map.center" zoom="map.zoom" events="marker.events"> <ui-gmap-marker idkey="2" coords="marker.coordinates"> </ui-gmap-marker> </ui-gmap-google-map> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="form-label">Price Range</div> <select class="admin-add-categories-select login-form-control input-lg input-admin-forms" ng-model="rest.priceRange" ng-options="price for price in priceRanges" ng-change="changePrice()" ng-class="{\'error-form\' : rest.restPriceInv && submited}"> <option value="" disabled selected>Price Range</option> </select> </div> </div> </ng-form> </div> </uib-tab> <!--Menu--> <uib-tab index="1" heading="Menu"> <div class="tab-pane-admin"> <ng-form name="menuForm"> <div class="row admin-menu-dish-margin admin-menu-select"> <div class="col-xs-12 col-sm-10 admin-menu-row"> <div class="btn-group"> <label class="btn btn-menu" ng-model="radioModel" uib-btn-radio="\'Breakfast\'">Breakfast</label> <label class="btn btn-menu" ng-model="radioModel" uib-btn-radio="\'Lunch\'">Lunch</label> <label class="btn btn-menu" ng-model="radioModel" uib-btn-radio="\'Dinner\'">Dinner</label> </div> </div> <div class="col-xs-12 col-sm-2"> <button class="btn admin-menu-add" type="button" ng-click="dishes.addNewDish(radioModel)">Add new dish</button> </div> </div> <div class="row admin-menu-row admin-dish-row" ng-repeat="dish in dishes.dishesList | filter:radioModel:dish.menuType"> <div class="col-xs-12 col-sm-1 admin-menu-dish-margin"> {{$index+1}}. </div> <div class="col-xs-12 col-sm-5"> <input type="text" class="login-form-control input-lg input-text-dish input-admin-forms admin-menu-dish-margin" placeholder="Name" ng-model="dish.name" required name="dishName_{{radioModel}}_{{$index}}" ng-change="dishes.editDish(dishes.dishesList.indexOf(dish))" ng-class="{\'error-form\' :  menuForm[\'dishName_\'+radioModel+\'_\' + $index].$error.required && submited}"> <input type="text" class="login-form-control input-lg input-text-dish input-admin-forms admin-menu-dish-margin" placeholder="Description" ng-change="dishes.editDish(dishes.dishesList.indexOf(dish))" ng-model="dish.description"> </div> <div class="col-xs-12 col-sm-2"> <select class="custom-select login-form-control input-lg input-text-dish input-admin-forms admin-menu-dish-margin" name="dishType_{{radioModel}}_{{$index}}" ng-model="dish.dishType" required ng-change="dishes.editDish(dishes.dishesList.indexOf(dish))" ng-options="dishType disable when dishType===\'Type\' for dishType in dishTypes" ng-class="{\'error-form\' :  dish.dishType===\'Type\' && submited}"> </select> </div> <div class="col-xs-12 col-sm-2"> <input type="number" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" min="1" placeholder="Price" ng-model="dish.price" required ng-change="dishes.editDish(dishes.dishesList.indexOf(dish))" name="dishPrice_{{radioModel}}_{{$index}}" ng-class="{\'error-form\' :  menuForm[\'dishPrice_\'+radioModel+\'_\' + $index].$error.required && submited}"> </div> <div class="col-xs-12 col-sm-1"> <div class="glyphicon glyphicon-trash admin-menu-dish-margin admin-menu-trash" ng-click="dishes.removeDish(dishes.dishesList.indexOf(dish))"></div> </div> </div> </ng-form> </div> </uib-tab> <!--Tables--> <uib-tab index="2" heading="Tables"> <div class="tab-pane-admin"> <ng-form name="tablesForm"> <div class="row admin-menu-dish-margin admin-menu-select"> <button class="btn admin-menu-add float-right" type="button" ng-click="rest.tables.addNewTables()" ng-disabled="rest.tables.newTables.length===10">Add new table</button> </div> <div class="row admin-menu-row admin-dish-row" ng-repeat="tablesRow in rest.tables.newTables"> <div class="col-xs-12 col-sm-1 admin-menu-dish-margin"> {{$index+1}}. </div> <div class="col-xs-12 col-sm-5"> <select ng-options="table.label as table.label disable when (table.disabled && (tablesRow.tableType===\'Select type of tables\' || tablesRow.tableType!==table.label)) for table in rest.tables.tablesList" ng-model="tablesRow.tableType" ng-change="rest.tables.typeChanged(tablesRow.tableType, \'{{tablesRow.tableType}}\', tablesRow)" class="login-form-control input-lg input-text-dish input-admin-forms admin-menu-dish-margin" name="table_{{$index}}" ng-class="{\'error-form\' :  submited && tablesForm[\'table_\' + $index].$modelValue==\'Select type of tables\'}"> </select> </div> <div class="col-xs-12 col-sm-2"> <input type="number" min="1" max="25" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" placeholder="Amount" ng-model="tablesRow.amount" required name="tableNumber_{{$index}}" ng-class="{\'error-form\' :  tablesForm[\'tableNumber_\' + $index].$error.required && submited}"> </div> <div class="col-xs-12 col-sm-1"> <div class="glyphicon glyphicon-trash admin-menu-dish-margin admin-menu-trash" ng-click="rest.tables.removeTables(rest.tables.newTables.indexOf(tablesRow))"></div> </div> </div> </ng-form> </div> </uib-tab> <!--Reservations--> <uib-tab index="3" heading="Reservations"> <div class="tab-pane-admin"> <ng-form name="reservationsForm"> <div class="row"> <div class="col-xs-12 col-sm-6 hr-admin"> <div class="form-label">Choose default length of reservation </div> <p class="form-label-exp">This will be the length for each group of people (in minutes, step 15 minutes) if not chosen otherwise</p> <input name="defaultStay" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" type="number" id="defaultStay" placeholder="Default Length" ng-model="rest.defaultLength" required ng-class="{\'error-form\' : submited && reservationsForm.defaultStay.$error.required}" min="15" max="720" step="15"> </div> </div> <hr> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="form-label">Or choose length for a specific group (in minutes)</div> </div> <div class="col-xs-12 col-sm-6"> <button class="btn admin-menu-add float-right" type="button" ng-click="reservations.addLength()" ng-disabled="reservations.pickedLengths.length===10">Add new group</button> </div> </div> <div class="row admin-menu-row admin-dish-row reservation-lenght-row" ng-repeat="pickedLength in reservations.pickedLengths"> <div class="row"> <div class="col-xs-12 col-sm-1 admin-menu-dish-margin"> {{$index+1}}. </div> <div class="col-xs-12 col-sm-3"> <select ng-options="len.label as len.label disable when (len.disabled && (pickedLength.label===\'Select number of Guests\' || pickedLength.label!==len.label)) for len in reservations.lengths" ng-model="pickedLength.label" ng-change="reservations.lengthChanged(pickedLength.label, \'{{pickedLength.label}}\', pickedLength); reservations.changeNumber(pickedLength);" class="login-form-control input-lg input-text-dish input-admin-forms admin-menu-dish-margin" name="guestNumber_{{$index}}" ng-class="{\'error-form\' : submited && reservationsForm[\'guestNumber_\' + $index].$modelValue==\'Select number of Guests\'}"> </select> </div> <div class="col-xs-12 col-sm-1"> <div class="glyphicon glyphicon-trash admin-menu-dish-margin admin-menu-trash" ng-click="reservations.removeLength($index)"></div> </div> </div> <div class="row admin-length-days"> <div class="col-xs-12 col-sm-4"> <p class="form-label-exp length">Monday - Friday</p> <p class="day-p">In the Morning</p> <input name="morningWork_{{$index}}" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" type="number" placeholder="Average meal length" ng-model="pickedLength.workday.morning" ng-change="reservations.lengthsChanged(pickedLength)" required ng-class="{\'error-form\' : submited && reservationsForm[\'morningWork_\' + $index].$error.required}" min="15" max="245" step="15"> <p class="day-p">Noon till Evening</p> <input name="dayWork_{{$index}}" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" type="number" placeholder="Average meal length" ng-model="pickedLength.workday.day" ng-change="reservations.lengthsChanged(pickedLength)" required ng-class="{\'error-form\' : submited && reservationsForm[\'morningWork_\' + $index].$error.required}" min="15" max="245" step="15"> <p class="day-p">Evening</p> <input name="eveningWork_{{$index}}" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" type="number" placeholder="Average meal length" ng-model="pickedLength.workday.evening" ng-change="reservations.lengthsChanged(pickedLength)" required ng-class="{\'error-form\' : submited && reservationsForm[\'eveningWork_\' + $index].$error.required}" min="15" max="245" step="15"> </div> <div class="col-xs-12 col-sm-offset-2 col-sm-4"> <p class="form-label-exp length">Saturday, Sunday</p> <p class="day-p">In the Morning</p> <input name="morningWeek_{{$index}}" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" type="number" id="morningWeek" placeholder="Average meal length" ng-model="pickedLength.weekend.morning" required ng-class="{\'error-form\' : submited && reservationsForm[\'morningWeek_\' + $index].$error.required}" ng-change="reservations.lengthsChanged(pickedLength)" min="15" max="245" step="15"> <p class="day-p">Noon till Evening</p> <input name="dayWeek_{{$index}}" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" type="number" id="dayWeek" placeholder="Average meal length" ng-model="pickedLength.weekend.day" required ng-class="{\'error-form\' : submited && reservationsForm[\'dayWeek_\' + $index].$error.required}" ng-change="reservations.lengthsChanged(pickedLength)" min="15" max="245" step="15"> <p class="day-p">Evening</p> <input name="eveningWeek_{{$index}}" class="login-form-control input-lg input-admin-forms admin-menu-dish-margin" type="number" id="eveningWeek" placeholder="Average meal length" ng-model="pickedLength.weekend.evening" required ng-class="{\'error-form\' : submited && reservationsForm[\'eveningWeek_\' + $index].$error.required}" ng-change="reservations.lengthsChanged(pickedLength)" min="15" max="245" step="15"> </div> </div> </div> </ng-form> </div> </uib-tab> </uib-tabset> <div class="alert-warning alert admin-warning" ng-repeat="error in rest.errorTables"> Could not delete <strong>{{error.amount}}</strong> tables for <strong>{{error.type}}</strong> because there are active reservations on those tables. </div> <div class="admin-rest-form"> <uib-progressbar class="progress-striped active" max="100" value="progress" type="danger" ng-show="progress && progress!==100">{{currentTask}}</uib-progressbar> <div class="col-sm-offset-6 col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6"> <button class="btn admin-menu-add btn-block" type="reset" ng-click="cancel()"> Back </button> </div> <div class="col-xs-12 col-sm-6"> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-admin-forms btn-submit" ng-disabled="submited && progress>=15 && restaurantForm.$valid"> Save Restaurant </button> <div ng-if="success" class="alert alert-success">{{success}}</div> <!--<img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="!loading" /> --> </div> </div> </div> </form> </div> </div> </uib-tab> <uib-tab index="2" heading="Locations"> <div ng-controller="AdminLocationManipulationController"> <div ng-show="!view"> <div class="card-admin-tabs"> <ul class="list-inline text-left admin-tabs"> <li> <h5 class="admin-tab-name">Locations :</h5> </li> <li class="a-admin float-right"> <button class="btn btn-block admin-add-button" ng-click="changeView(\'Add\')">Add Location</button> </li> <li class="a-admin float-right"> <input type="text" class="admin-search" ng-model="searchText" ng-change="filter()" maxlength="40" placeholder="Search"> </li> </ul> </div> <div class="container-table"> <table class="table table-bordered"> <thead> <tr> <th class="col-xs-5">Name</th> <th class="col-xs-5">Country</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="row in filterResults"> <td>{{row.name}}</td> <td>{{row.country}}</td> <td class="icon-col"> <div class="btn-group logout-dropdown-div admin-delete" uib-dropdown auto-close="outsideClick" is-open="isOpen"> <span class="glyphicon glyphicon-pencil table-icon" ng-click="changeView(\'Edit\', row)"></span> <a uib-dropdown-toggle ng-disabled="disabled" class="glyphicon glyphicon-trash table-icon"></a> <ul class="dropdown-menu logout-dropdown" uib-dropdown-menu role="menu" aria-labelledby="single-button"> <li> <h4> Are you sure you want to delete? </h4> </li> <li> <ul class="list list-inline"> <li> <button class="logout-yes-button btn-block btn-home btn" ng-click="deleteLocation(row); isOpen = false;">Yes</button> </li> <li> <button class="logout-no-button btn-block btn-home btn" ng-click="isOpen = false">No</button> </li> </ul> </li> </ul> </div> </td> </tr> </tbody> </table> </div> <ul uib-pagination total-items="numPages" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true" ng-change="filter()"></ul> </div> <div class="container card-admin-tabs" ng-show="view"> <!--add--> <form name="LocationAddForm" class="admin-add-user" ng-show="add===true" ng-submit="changeLocation(\'Add\')" novalidate> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6"> <input type="text" maxlength="240" ng-model="locationName" class="login-form-control input-lg input-admin-forms" placeholder="New Location Name" required> <div ng-if="error" class="alert alert-danger">{{error}}</div> <div ng-if="success" class="alert alert-success">{{success}}</div> </div> <div class="col-xs-12 col-sm-6"> <input type="text" maxlength="240" ng-model="countryName" class="login-form-control input-lg input-admin-forms" placeholder="Existing or New Country Name" required> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6"> <button class="btn admin-menu-add btn-block" type="button" ng-click="cancel()"> Back </button> </div> <div class="col-xs-12 col-sm-6"> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-admin-forms btn-submit" ng-disabled="LocationAddForm.$invalid"> Create Location </button> <!--<img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="!loading" /> --> </div> </div> </div> </form> <!--edit--> <form name="LocationEditForm" class="admin-add-user" ng-show="edit===true" ng-submit="changeLocation(\'Edit\')" novalidate> <div class="row"> <div class="col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6"> <input type="text" maxlength="240" ng-model="locationName" class="login-form-control input-lg input-admin-forms" placeholder="New Location Name" required> <div ng-if="error" class="alert alert-danger">{{error}}</div> <div ng-if="success" class="alert alert-success">{{success}}</div> </div> <div class="col-xs-12 col-sm-6"> <input type="text" maxlength="240" ng-model="countryName" class="login-form-control input-lg input-admin-forms" placeholder="Existing or New Country Name" required> </div> </div> <div class="col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6"> <button class="btn admin-menu-add btn-block" type="button" ng-click="cancel()"> Back </button> </div> <div class="col-xs-12 col-sm-6"> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-admin-forms btn-submit" ng-disabled="LocationEditForm.$invalid"> Save Location </button> <!--<img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="!loading" /> --> </div> </div> </div> </form> </div> </div> </uib-tab> <uib-tab index="3" heading="Categories"> <div ng-controller="AdminCategoryManipulationController as $cat"> <div ng-show="!view"> <div class="card-admin-tabs"> <ul class="list-inline text-left admin-tabs"> <li> <h5 class="admin-tab-name">Categories :</h5> </li> <li class="a-admin float-right"> <button class="btn btn-block admin-add-button" ng-click="changeView(\'Add\')">Add Category</button> </li> <li class="a-admin float-right"> <input type="text" class="admin-search" ng-model="searchText" ng-change="filter()" maxlength="40" placeholder="Search"> </li> </ul> </div> <div class="container-table"> <table class="table table-bordered"> <thead> <tr> <th>Name</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="row in filterResults"> <td>{{row.name}}</td> <td class="icon-col"> <div class="btn-group logout-dropdown-div admin-delete" uib-dropdown auto-close="outsideClick" is-open="isOpen"> <span class="glyphicon glyphicon-pencil table-icon" ng-click="changeView(\'Edit\', row)"></span> <a uib-dropdown-toggle ng-disabled="disabled" class="glyphicon glyphicon-trash table-icon"></a> <ul class="dropdown-menu logout-dropdown" uib-dropdown-menu role="menu" aria-labelledby="single-button"> <li> <h4> Are you sure you want to delete? </h4> </li> <li> <ul class="list list-inline"> <li> <button class="logout-yes-button btn-block btn-home btn" ng-click="deleteCategory(row); isOpen = false;">Yes</button> </li> <li> <button class="logout-no-button btn-block btn-home btn" ng-click="isOpen = false">No</button> </li> </ul> </li> </ul> </div> </td> </tr> </tbody> </table> </div> <ul uib-pagination total-items="numPages" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true" ng-change="filter()"></ul> </div> <div class="container card-admin-tabs" ng-show="view"> <!--add--> <form name="CategoryForm" class="admin-add-user" ng-show="add===true" ng-submit="changeCategory(\'Add\')" novalidate> <div class="row"> <div class="col-xs-12 col-sm-6"> <input type="text" maxlength="240" ng-model="categoryName" class="login-form-control input-lg input-admin-forms" placeholder="New Category Name" required> <div ng-if="error" class="alert alert-danger">{{error}}</div> <div ng-if="success" class="alert alert-success">{{success}}</div> </div> <div class="col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6"> <button class="btn admin-menu-add btn-block" type="button" ng-click="cancel()"> Back </button> </div> <div class="col-xs-12 col-sm-6"> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-admin-forms btn-submit" ng-disabled="CategoryForm.$invalid"> Create Category </button> <!--<img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="!loading" /> --> </div> </div> </div> </form> <!--edit--> <form name="CategoryForm" class="admin-add-user" ng-show="edit===true" ng-submit="changeCategory(\'Edit\')" novalidate> <div class="row"> <div class="col-xs-12 col-sm-6"> <input type="text" maxlength="240" ng-model="categoryName" class="login-form-control input-lg input-admin-forms" placeholder="Edit Category Name" required> <div ng-if="error" class="alert alert-danger">{{error}}</div> <div ng-if="success" class="alert alert-success">{{success}}</div> </div> <div class="col-xs-12 col-sm-6"> <div class="col-xs-12 col-sm-6"> <button class="btn admin-menu-add btn-block" type="button" ng-click="cancel()"> Back </button> </div> <div class="col-xs-12 col-sm-6"> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-admin-forms btn-submit" ng-disabled="CategoryForm.$invalid"> Save Category </button> <!--<img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="!loading" /> --> </div> </div> </div> </form> </div> </div> </uib-tab> <uib-tab index="4" heading="Users"> <div ng-controller="AdminUserManipulationController"> <div ng-show="!view"> <div class="card-admin-tabs"> <ul class="list-inline text-left admin-tabs"> <li> <h5 class="admin-tab-name">Users :</h5> </li> <li class="a-admin float-right"> <button class="btn btn-block admin-add-button" ng-click="changeView(\'Add\')">Add User</button> </li> <li class="a-admin float-right"> <input type="text" class="admin-search" ng-model="searchText" ng-change="filter()" maxlength="40" placeholder="Search"> </li> </ul> </div> <div class="container-table"> <table class="table table-bordered"> <thead> <tr> <th>Firstname</th> <th>Lastname</th> <th>Email</th> <th class="col-xs-1"></th> </tr> </thead> <tbody> <tr ng-repeat="row in filterResults"> <td>{{row.user_data.firstName}}</td> <td>{{row.user_data.lastName}}</td> <td>{{row.email}}</td> <td class="icon-col"> <div class="btn-group logout-dropdown-div admin-delete" uib-dropdown auto-close="outsideClick" is-open="isOpen"> <span class="glyphicon glyphicon-pencil table-icon" ng-click="changeView(\'Edit\', row)"></span> <a uib-dropdown-toggle ng-disabled="disabled" class="glyphicon glyphicon-trash table-icon"></a> <ul class="dropdown-menu logout-dropdown" uib-dropdown-menu role="menu" aria-labelledby="single-button"> <li> <h4> Are you sure you want to delete? </h4> </li> <li> <ul class="list list-inline"> <li> <button class="logout-yes-button btn-block btn-home btn" ng-click="deleteUser(row); isOpen = false;">Yes</button> </li> <li> <button class="logout-no-button btn-block btn-home btn" ng-click="isOpen = false">No</button> </li> </ul> </li> </ul> </div> </td> </tr> </tbody> </table> </div> <ul uib-pagination total-items="numPages" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true" ng-change="filter()"></ul> </div> <div class="container card-admin-tabs" ng-show="view"> <form name="registerForm" class="admin-add-user" ng-submit="addSubmit(registerForm.$valid)" novalidate> <div class="row"> <div class="col-xs-12 col-sm-6"> <h5>First Name</h5> <div class="form-group formg"> <input name="firstName" class="login-form-control input-lg input-admin-forms" type="text" id="firstName" placeholder="First Name" ng-model="firstName" required> </div> <h5>Last Name</h5> <div class="form-group formg"> <input name="lastName" class="login-form-control input-lg input-admin-forms" type="text" id="lastName" placeholder="Last Name" ng-model="lastName" required> </div> <h5>Email</h5> <div class="form-group formg" ng-class="{\'has-error\' : registerForm.email.$invalid && !registerForm.email.$pristine}"> <input name="email" class="login-form-control input-lg input-admin-forms" type="email" id="email" placeholder="Email" ng-model="email" required> <p ng-show="registerForm.email.$invalid && !registerForm.email.$pristine" class="help-block">Enter a valid email.</p> </div> <h5>Phone</h5> <div class="form-group formg" ng-class="{\'has-error\' : registerForm.phone.$touched && !registerForm.phone.$pristine && !registerForm.phone.$valid  }"> <input name="phone" class="login-form-control input-lg input-admin-forms" type="text" id="phone" placeholder="Phone Number" ng-model="phone" ng-minlength="9" required> <p ng-show="registerForm.phone.$touched && !registerForm.phone.$pristine && !registerForm.phone.$valid" class="help-block">Phone number must be at least 9 cases long.</p> </div> <div class="row no-gutters"> <div class="col-sm-6 formg"> <h5>Country</h5> <select class="custom-select login-form-control input-lg input-admin-forms" ng-model="country" ng-options="c.country_name for c in locations" required> <option value="" disabled selected>Country</option> </select> </div> <div class="col-sm-6 formg"> <h5>City</h5> <select class="login-form-control input-lg input-admin-forms" ng-model="city" ng-options="d.name.valueOf() for d in country.city_names" required> <option value="" disabled selected>City</option> </select> </div> </div> <h5 ng-show="edit">Change Password</h5> <input ng-show="edit" type="checkbox" class="radio" ng-model="editPassword" ng-change="password=null; confirmPassword=null;"> <h5>Password</h5> <div class="form-group formg" ng-class="{\'has-error\' : registerForm.password.$touched && !registerForm.password.$pristine && !registerForm.password.$valid }"> <input name="password" class="login-form-control input-lg input-admin-forms" type="password" id="password" placeholder="Password" ng-model="password" ng-required="!edit || editPassword" minlength="5" ng-disabled="edit && !editPassword"> <p ng-show="editPassword && registerForm.password.$touched && !registerForm.password.$pristine && !registerForm.password.$valid" class="help-block">Password needs to be at least 5 characters long!</p> </div> <h5>Confirm Password</h5> <div class="form-group formg bottom" ng-class="{\'has-error\' : registerForm.confirmPassword.$touched   && confirmPassword!=password || !registerForm.confirmPassword.$pristine && !registerForm.confirmPassword.$valid }"> <input name="confirmPassword" class="login-form-control input-lg input-admin-forms" type="password" id="confirmPassword" placeholder="Confirm Password" ng-model="confirmPassword" ng-required="!edit || editPassword" minlength="5" ng-disabled="edit && !editPassword"> <p ng-show=" registerForm.confirmPassword.$touched  && confirmPassword!=password" class="help-block">Passwords do not match.</p> </div> <div ng-if="error" class="alert alert-danger">{{error}}</div> <div ng-if="success" class="alert alert-success">{{success}}</div> </div> <div class="col-xs-12 col-sm-6 button-admin-add-user"> <div class="col-xs-12 col-sm-6"> <button class="btn admin-menu-add btn-block" type="button" ng-click="cancel()"> Back </button> </div> <div class="col-xs-12 col-sm-6"> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-admin-forms btn-submit" ng-disabled="registerForm.$invalid"> Save User </button> <div> <img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> </div> </div> </div> </div> </form> </div> </div> </uib-tab> </uib-tabset> </div> </body>'),
a.put("views/footer.html",'<div class="container"> <div class="row"> <div class="col-sm-12 col-md-6"> <ul class="list-inline text-left"> <li> <a href="#/" class="footer-left">Privacy Policy</a> </li> <li> <a href="#/" class="footer-left">Terms of use</a> </li> <li> <a href="#/" class="footer-left">Sitemap</a> </li> <li> <a href="#/" class="footer-left">Mobile site</a> </li> </ul> </div> <div class="col-sm-12 col-md-6 right-footer-col"> <ul class="list-inline"> <li> <a href="#/" class="footer-right">About Us</a> </li> <li> <a href="#/" class="footer-right">Blog</a> </li> <li> <a href="#/" class="footer-right">Careers</a> </li> <li> <a href="#/" class="footer-right">Press</a> </li> <li> <a href="#/" class="footer-right">Advertise</a> </li> </ul> </div> </div> <a class="footer-left">Copyright © 2016 All rights reserved.</a> </div>'),a.put("views/header.html",'<div class="navbar navbar-fixed-top navbar-inverse" role="navigation"> <div class="container"> <div class="navbar-header"> <button type="button" class="navbar-toggle collapsed no-border" data-toggle="collapse" data-target="#js-navbar-collapse"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> <a class="navbar-brand" href="#/">RestaurantLogo</a> </div> <div class="collapse navbar-collapse navbar-right no-border" ng-controller="NavigationController" id="js-navbar-collapse"> <ul class="nav navbar-nav"> <li ng-class="{ active: isActive(\'/\')}"><a href="#/">Home</a></li> <li ng-class="{ active: isActive(\'/restaurants\')}"><a href="#/restaurants">Restaurants</a></li> <li ng-if="!isLoged()" ng-class="{ active: isActive(\'/login\')}"><a href="#/login">Login</a></li> <li ng-if="isLoged()" ng-class="{ active: isActive(\'/myreservations\')}"><a href="#/myreservations">My reservations</a></li> <li ng-if="isLoged() && isAdmin()" ng-class="{ active: isActive(\'/adminpanel\')}"><a href="#/admin">Admin</a></li> <li ng-if="isLoged()"> <div class="btn-group logout-dropdown-div" uib-dropdown auto-close="outsideClick" is-open="isOpen"> <a uib-dropdown-toggle ng-disabled="disabled">Logout</a> <ul class="dropdown-menu logout-dropdown" uib-dropdown-menu role="menu" aria-labelledby="single-button"> <li> <h4> Are you sure you want to Logout? </h4> </li> <li> <ul class="list list-inline"> <li> <button class="logout-yes-button btn-block btn-home btn" ng-click="Logout()">Yes</button> </li> <li> <button class="logout-no-button btn-block btn-home btn" ng-click="isOpen = false">No</button> </li> </ul> </li> </ul> </div> </li> </ul> </div> </div> </div>'),a.put("views/home.html",'<body> <div class="home-masthead text-center"> <div class="container"> <div class="row"> <div class="col-xs-12"> <h1>Make a free reservation </h1> <h3 class="container-h3" ng-if="!noGeoLoc">Choose your table from {{closeRests}} restaurants near you</h3> <h3 class="container-h3" ng-if="noGeoLoc">Choose your table</h3> <form ng-controller="ReservationBarController as $ctrl" ng-submit="homeSearch()"> <div class="row no-gutters form-row"> <div class="col-sm-12 col-md-4"> <input type="search" class="form-control home-form-control form-control-lg" ng-model="searchHome" placeholder="Location, Restaurant or Cousine "> </div> <div class="col-xs-12 col-sm-6 col-md-2"> <input type="number" class="form-control home-form-control" placeholder="Guests" ng-model="selectedNumber" min="1" max="15"> </div> <div class="col-xs-12 col-sm-6 col-md-2"> <input type="date" class="form-control home-form-control" ng-model="selectedDate" min="{{minDate | date:\'yyyy-MM-dd\'}}" max="{{maxDate | date:\'yyyy-MM-dd\'}}" value="{{selectedDate  | date:\'yyyy-MM-dd\'}}"> </div> <div class="col-xs-12 col-sm-6 col-md-2"> <input type="time" class="form-control home-form-control" ng-model="selectedTime" step="900" min="{{minTime | date:\'HH:mm\'}}" max="22:00" value="{{selectedTime| date:\'HH:mm\'}}" required> </div> <div class="col-xs-12 col-sm-6 col-md-2"> <button type="submit" class="btn btn-home btn-block btn-primary form-btn">Find a table</button> </div> </div> </form> </div>  </div> </div> </div>  <div class="container text-center container-restaurants"> <h3 class="container-h3" resize>Popular for Lunch Today </h3> <div uib-carousel ng-if="windowWidth <755" active="1"> <div uib-slide ng-repeat="y in restaurants" index="$index"> <div class="card" ng-click="save(y)"> <img ng-src="{{y.imageFileName}}"> <div class="container"> <h3 class="container-h3"> {{y.restaurantName}} </h3> <ul class="list list-inline"> <li class="middle"> <span class="glyphicon glyphicon-star" ng-repeat="n in range(y.mark)"></span><span class="glyphicon glyphicon-star-empty" ng-repeat="n in range(5-y.mark)"></span> </li> <li> <span>({{y.votes}})</span> </li> <li class="middle"> <span class="glyphicon glyphicon-usd dolar-full" ng-repeat="n in range(y.priceRange)"></span><span class="glyphicon glyphicon-usd dolar-empty" ng-repeat="n in range(5-y.priceRange)"></span> </li> </ul> <hr> <p style="color: gray"> {{y.foodType}} </p> </div> <button type="button" class="btn btn-home btn-block" ng-click="save(y)">Reserve Now</button> </div> </div> </div> <div class="row" ng-if="windowWidth >755"> <div class="col-sm-6 col-md-4" ng-repeat="y in restaurants"> <div class="card" ng-click="save(y)"> <img ng-src="{{y.imageFileName}}"> <div class="container"> <h3 class="container-h3"> {{y.restaurantName}} </h3> <ul class="list list-inline"> <li class="middle"> <span class="glyphicon glyphicon-star" ng-repeat="n in range(y.mark)"></span><span class="glyphicon glyphicon-star-empty" ng-repeat="n in range(5-y.mark)"></span> </li> <li> <span>({{y.votes}})</span> </li> <li class="middle"> <span class="glyphicon glyphicon-usd dolar-full" ng-repeat="n in range(y.priceRange)"></span><span class="glyphicon glyphicon-usd dolar-empty" ng-repeat="n in range(5-y.priceRange)"></span> </li> </ul> <hr> <p style="color: gray"> {{y.foodType}} </p> </div> <button type="button" class="btn btn-home btn-block" ng-click="save(y)">Reserve Now</button> </div> </div> </div> </div> <div class="home-masthead text-center"> <div class="container"> <h3 class="container-h3">Specials</h3> <div uib-carousel active="0" ng-if="windowWidth >755"> <div uib-slide ng-repeat="n in range(numberRepeat)" index="$index"> <div class="col-sm-4" ng-repeat="dish in [dishes[$index*3], dishes[1+$index*3], dishes[2+$index*3]] track by $index"> <div class="card-blog" ng-if="dish.heading"> <img ng-src="{{dish.img}}"> <div class="container" style="color: whitesmoke"> <h3 class="heading-blog container-h3"> {{dish.heading}}</h3> <ul class="list list-inline"> <li> <p>{{dish.location}}</p> </li> <li> <p>|</p> </li> <li> <p>{{dish.numRestaurants}} restaurants</p> </li> </ul> </div> </div> </div> </div> </div> <div uib-carousel active="0" ng-if="windowWidth <755"> <div uib-slide ng-repeat="dish in dishes" index="$index"> <div class="col-sm-4"> <div class="card-blog"> <img ng-src="{{dish.img}}"> <div class="container" style="color: whitesmoke"> <h3 class="heading-blog container-h3"> {{dish.heading}}</h3> <ul class="list list-inline"> <li> <p>{{dish.location}}</p> </li> <li> <p>|</p> </li> <li> <p>{{dish.numRestaurants}} restaurants</p> </li> </ul> </div> </div> </div> </div> </div> </div> </div> <div ng-controller="PopularLocationsController" class="container popular-loc"> <h3 class="text-center container-h3">Popular locations</h3> <div class="row popular-locations-row"> <div class="col-xs-6 col-sm-3 col-md-3 text-left" ng-model="name" ng-repeat="name in popularLocations"> <button class="btn-location center-block pop-loc-info" ng-click="filterLocations(name.location)"> <h4>{{name.location}}</h4> <p class="number">{{name.num}} restaurants</p> </button> </div> </div> </div> </body>'),a.put("views/login.html",'<body> <div class="container container-form"> <form name="loginForm" ng-submit="loginSubmit(loginForm.$valid)" novalidate> <ul class="list list-inline"> <li> <h3 class="login-h3">Login</h3> </li> <li class="pull-right"> <p><a class="login-a" href="#/register">Create Account</a></p> </li> </ul> <div class="form-group login-form-group" ng-class="{\'has-error\' : loginForm.email.$invalid && !loginForm.email.$pristine }"> <input name="email" class="login-form-control input-lg input-h" type="email" id="email" placeholder="Email" ng-model="email" required> <p ng-show="loginForm.email.$invalid && !loginForm.email.$pristine" class="help-block">Enter a valid email.</p> </div> <div class="bottom"> <input name="password" class="login-form-control input-lg input-h" type="password" id="password" placeholder="Password" ng-model="password" required> </div> <div ng-if="error" class="alert alert-danger">{{error}}</div> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-h btn-submit" ng-disabled="loginForm.$invalid"> Login </button> <div> <img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> </div> </form> </div> </body>'),a.put("views/myreservations.html",'<body> <div class="container"> <div class="container cont-my-reservations"> <div> <img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> </div> <div class="container-card" ng-show="reservation"> <h5 class="reservation-details-head">Reservation Details</h5> <div class="row"> <div class="col-xs-12 col-sm-3"> <div class="profile reservation-profile"> <img ng-src="{{reservation.imageFileName}}"> </div> </div> <div class="col-xs-12 col-sm-9"> <h6 class="reservation-det-name">RESTAURANT</h6> <p class="rest-name">{{reservation.restaurantName}}</p> <div class="row"> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">GUESTS</h6> <p class="reservation-info">{{reservation.guests}}</p> </div> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">DURATION</h6> <p class="reservation-info">{{reservation.reservationDuration}} minutes</p> </div> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">DATE</h6> <p class="reservation-info">{{reservation.reservationDate }}</p> </div> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">TIME</h6> <p class="reservation-info">{{reservation.reservationHour}}</p> </div> </div> </div> </div> </div> <uib-tabset class="tabs-reservations" active="activeJustified" justified="true"> <uib-tab index="0" heading="Active reservations"> <div class="row row-info"> <div class="col-xs-4"> Restaurant name </div> <div class="col-xs-4"> Date </div> <div class="col-xs-4"> Time </div> </div> <div class="container-reservations-info"> <div class="no-reservations" ng-show="noReservationsActive"> No active reservations! </div> <button class="row-reservation btn-block" ng-repeat="reservationActive in userReservations.activeReservations" ng-click="pick(reservationActive)"> <div class="col-xs-4 col-info"> {{reservationActive.restaurantName}} </div> <div class="col-xs-4 col-info"> {{reservationActive.reservationDate}} </div> <div class="col-xs-4 col-info"> {{reservationActive.reservationHour}} </div> </button> </div> </uib-tab> <uib-tab index="1" heading="Past reservations"> <div class="row row-info"> <div class="col-xs-4"> Restaurant name </div> <div class="col-xs-4"> Date </div> <div class="col-xs-4"> Time </div> </div> <div class="container-reservations-info"> <div class="no-reservations" ng-show="noReservationsPast"> No past reservations! </div> <button class="row-reservation btn-block" ng-repeat="reservationPast in userReservations.pastReservations" ng-click="pick(reservationPast)"> <div class="col-xs-4 col-info"> {{reservationPast.restaurantName}} </div> <div class="col-xs-4 col-info"> {{reservationPast.reservationDate}} </div> <div class="col-xs-4 col-info"> {{reservationPast.reservationHour}} </div> </button> </div> </uib-tab> </uib-tabset> </div> </div> </body>'),a.put("views/register.html",'<body> <div class="container container-form"> <form name="registerForm" ng-submit="registerSubmit(registerForm.$valid)" novalidate> <ul class="list list-inline"> <li> <h3 class="login-h3">Create Account</h3> </li> <li class="pull-right"> <p3><a class="login-a" href="#/login">Login</a></p3> </li> </ul> <div class="form-group formg"> <input name="firstName" class="login-form-control input-lg input-h" type="text" id="firstName" placeholder="First Name" ng-model="firstName" required> </div> <div class="form-group formg"> <input name="lastName" class="login-form-control input-lg input-h" type="text" id="lastName" placeholder="Last Name" ng-model="lastName" required> </div> <div class="form-group formg" ng-class="{\'has-error\' : registerForm.email.$invalid && !registerForm.email.$pristine}"> <input name="email" class="login-form-control input-lg input-h" type="email" id="email" placeholder="Email" ng-model="email" required> <p ng-show="registerForm.email.$invalid && !registerForm.email.$pristine" class="help-block">Enter a valid email.</p> </div> <div class="form-group formg" ng-class="{\'has-error\' : registerForm.phone.$touched && !registerForm.phone.$pristine && !registerForm.phone.$valid  }"> <input name="phone" class="login-form-control input-lg input-h" type="text" id="phone" placeholder="Phone Number" ng-model="phone" ng-minlength="9" required> <p ng-show="registerForm.phone.$touched && !registerForm.phone.$pristine && !registerForm.phone.$valid" class="help-block">Phone number must be at least 9 cases long.</p> </div> <div class="row no-gutters"> <div class="col-sm-6 formg"> <select class="custom-select login-form-control input-lg input-h" ng-model="country" ng-options="c.country_name for c in locations" required> <option value="" disabled selected>Country</option> </select> </div> <div class="col-sm-6 formg"> <select class="login-form-control input-lg input-h" ng-model="city" ng-options="d.name.valueOf() for d in country.city_names" required> <option value="" disabled selected>City</option> </select> </div> </div> <div class="form-group formg" ng-class="{\'has-error\' : registerForm.password.$touched && !registerForm.password.$pristine && !registerForm.password.$valid }"> <input name="password" class="login-form-control input-lg input-h" type="password" id="password" placeholder="Password" ng-model="password" required minlength="5"> <p ng-show=" registerForm.password.$touched && !registerForm.password.$pristine && !registerForm.password.$valid" class="help-block">Password needs to be at least 5 characters long!</p> </div> <div class="form-group formg bottom" ng-class="{\'has-error\' : registerForm.confirmPassword.$touched   && confirmPassword!=password || !registerForm.confirmPassword.$pristine && !registerForm.confirmPassword.$valid }"> <input name="confirmPassword" class="login-form-control input-lg input-h" type="password" id="confirmPassword" placeholder="Confirm Password" ng-model="confirmPassword" required minlength="5"> <p ng-show=" registerForm.confirmPassword.$touched  && confirmPassword!=password" class="help-block">Passwords do not match.</p> </div> <div ng-if="error" class="alert alert-danger">{{error}}</div> <button type="submit" class="btn btn-primary btn-block no-border btn-lg input-h btn-submit" ng-disabled="registerForm.$invalid"> Create an account </button> <div> <img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> </div> </form> </div> </body>'),a.put("views/reservation.html",'<body> <div class="container"> <div class="row text-center"> <h3 class="head">Complete your reservation</h3> </div> <div class="container-card-reservation"> <div class="row"> <div class="row"> <div class="col-xs-12 col-sm-6"> <h5 class="reservation-details-head reservation-details-head-add">Reservation Details</h5> </div> <div class="col-xs-12 col-sm-6" ng-if="userLogged"> <uib-progressbar value="counter" class="progress-reservation" max="180">You have {{(counter/60)-(counter%60)/60 | number : 0}}:{{counter%60}} minutes to complete your reservation. </uib-progressbar> </div> </div> <div class="col-xs-12 col-sm-3"> <div class="reservation-profile reservation-prof"> <img ng-src="{{restaurantNameImage.imageFileName}}"> </div> </div> <div class="col-xs-12 col-sm-9"> <h6 class="reservation-det-name">RESTAURANT</h6> <p class="rest-name">{{restaurantNameImage.restaurantName}}</p> <div class="row"> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">GUESTS</h6> <p class="reservation-info">{{information.persons}}</p> </div> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">DURATION</h6> <p class="reservation-info">{{information.lengthOfStay}} minutes</p> </div> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">DATE</h6> <p class="reservation-info">{{information.reservationDate | date:"MMMM d, yyyy"}}</p> </div> <div class="col-xs-12 col-sm-6"> <h6 class="reservation-det-name">TIME</h6> <p class="reservation-info">{{information.reservationHour | date:\'HH:mm\'}}</p> </div> </div> </div> </div> </div> <h5 ng-if="!userLogged" class="warning"><span class="glyphicon glyphicon-exclamation-sign exclamation" aria-hidden="true"></span> Reservation is not secured! Login in or Register to secure your table.</h5> <h5 ng-if="userLogged" class="warning"><span class="glyphicon glyphicon-ok-circle ok" aria-hidden="true"></span> Reservation is secured for the duration of the countdown.</h5> <div ng-if="currentUser"> <h4 class="h4-reservation">Special Request:</h4> <form name="reserveLoggedIn" ng-submit="reservationSubmit()" class="text-center" novalidate> <textarea name="request" rows="1" class="reservation-form-control input-lg input-h request login-form-control" type="text" id="requestLogged" placeholder="Add a special request (optional)" ng-model="request" maxlength="200">\n        </textarea> <button type="submit" class="btn btn-reservation btn-primary btn-block no-border btn-lg input-h btn-submit-reservation center-block" ng-show="information.active"> Complete Reservation </button> <div class="alert alert-danger alert-expired" ng-show="!information.active"> <strong>Expired!</strong> This reservation session is expired and cannot be finalised. </div> <div> <img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> </div> <p class="terms" ng-show="information.active">By clicking “Complete Reservation” you agree to the AppName Terms of use and Privacy Policy.</p> </form> </div> <div ng-if="!currentUser" ng-controller="SubmitReservationController"> <h4 class="h4-reservation">Already a member? <button class="sign-in" ng-click="signInClick()">Sign in!</button> </h4> <h4 class="h4-reservation">Register</h4> <form name="registerForm" ng-submit="registerSubmit(registerForm.$valid)" class="text-center" novalidate> <div class="row"> <div class="col-xs-12 col-sm-6 form-group"> <input name="firstName" class="login-form-control reservation-form-control input-lg" type="text" id="firstName" placeholder="First Name" ng-model="firstName" required> </div> <div class="col-xs-12 col-sm-6 form-group"> <input name="lastName" class="login-form-control reservation-form-control input-lg" type="text" id="lastName" placeholder="Last Name" ng-model="lastName" required> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6 form-group" ng-class="{\'has-error\' : registerForm.email.$invalid && !registerForm.email.$pristine}"> <input name="email" class="login-form-control reservation-form-control input-lg" type="email" id="email" placeholder="Email" ng-model="email" required> <p ng-show="registerForm.email.$invalid && !registerForm.email.$pristine" class="help-block">Enter a valid email.</p> </div> <div class="col-xs-12 col-sm-6 form-group" ng-class="{\'has-error\' : registerForm.phone.$touched && !registerForm.phone.$valid  }"> <input name="phone" class="login-form-control reservation-form-control input-lg" type="text" id="phone" placeholder="Phone Number" ng-model="phone" ng-minlength="9" required> <p ng-show="registerForm.phone.$touched && !registerForm.phone.$valid" class="help-block">Phone number must be at least 9 cases long.</p> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6 form-group"> <input name="password" class="login-form-control reservation-form-control input-lg" type="password" id="password" placeholder="Password" ng-model="password" required> </div> <div class="col-xs-12 col-sm-6 form-group" ng-class="{\'has-error\' : registerForm.confirmPassword.$touched   && confirmPassword!=password}"> <input name="confirmPassword" class="login-form-control reservation-form-control input-lg" type="password" id="confirmPassword" placeholder="Confirm Password" ng-model="confirmPassword" required> <p ng-show=" registerForm.confirmPassword.$touched  && confirmPassword!=password" class="help-block">Passwords do not match.</p> </div> </div> <div class="row"> <div class="col-xs-12 col-sm-6 form-group"> <select class="login-form-control custom-select reservation-form-control input-lg" ng-model="country" ng-options="c.country_name for c in locations" required> <option value="" disabled selected>Country</option> </select> </div> <div class="col-xs-12 col-sm-6 form-group"> <select class="login-form-control reservation-form-control input-lg" ng-model="city" ng-options="d.name.valueOf() for d in country.city_names" required> <option value="" disabled selected>City</option> </select> </div> </div> <div ng-if="error" class="alert alert-danger">{{error}}</div> <button type="submit" class="btn btn-reservation btn-primary btn-block no-border btn-lg input-h btn-submit-reservation center-block" ng-disabled="registerForm.$invalid"> Register account </button> <div> <img class="center-block loading" src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> </div> <p class="terms">You need to be logged in to make a reservation.</p> </form> </div> </div> </body> '),a.put("views/restaurant.html",'<body> <script ng-controller="ReviewController as $ctrl" type="text/ng-template" id="myModalContent.html"><div class="modal-header">\n    <div class="glyphicon glyphicon-remove back-icon-review" ng-click="$ctrl.cancel()"></div>\n    <h3 class="modal-title restaurant-h3-rate" id="review-modal-title">Rate this place</h3>\n  </div>\n  <div class="modal-body" id="review-modal-body">\n    <div class="row center-block row-review">\n      <div class="col-12 ">\n        <form class="reviewForm" name="reviewForm" ng-submit="$ctrl.ok()" novalidate>\n\n          <span uib-rating ng-model="rate" class="rate restaurant-rate" on-leave="overStar = null" enable-reset="false"\n                aria-labelledby="default-rating"></span>\n\n          <div class="form-group">\n\n              <textarea name="review" rows="5"\n                        class="form-control restaurant-form-control"\n                        type="text"\n                        id="review"\n                        placeholder="Write a review"\n                        ng-model="review"\n                        required="required"\n              ></textarea>\n          </div>\n          <button type="submit" class="btn btn-restaurant btn-block " ng-disabled="reviewForm.$invalid">Save</button>\n\n        </form>\n      </div>\n    </div>\n\n  </div></script> <div class="restaurant-masthead"> <img ng-src="{{restaurant.coverFileName}}"> </div> <div class="container main"> <div class="row"> <div class="hidden-sm hidden-xs col-md-3"> <div> <div class="profile"> <img ng-src="{{restaurant.imageFileName}}"> </div> <div class="list-group"> <a ng-click="goTo(anchor)" class="list-group-item anchors" ng-repeat="anchor in [\'Reservation\', \'About\', \'Menu\', \'Reviews\']">{{anchor}}</a> </div> </div> </div> <div class="col-md-9"> <div class="container-info"> <h3 class="restaurant-h3">{{restaurant.restaurantName}}</h3> <ul class="list list-inline"> <li class="restaurant-li middle"> <span class="glyphicon glyphicon-star" ng-repeat="n in range(restaurant.mark)"></span><span class="glyphicon glyphicon-star-empty" ng-repeat="n in range(5-restaurant.mark)"></span> </li> <li class="restaurant-li"> <div>({{restaurant.votes}})</div> </li> <li class="restaurant-li middle"> <span class="glyphicon glyphicon-usd dolar-full-restaurant" ng-repeat="n in range(restaurant.priceRange)"></span><span class="glyphicon glyphicon-usd dolar-empty" ng-repeat="n in range(5-restaurant.priceRange)"></span> </li> <li class="restaurant-li"> {{restaurant.foodType}} </li> <li class="pull-right restaurant-li"> <button ng-controller="ReviewController as $ctrl" type="button" class="btn btn-restaurant btn-block btn-default" style="width: 160px" ng-click="$ctrl.open()">Rate this place </button> </li> </ul> </div> <div class="container-card" id="Reservation" ng-controller="ReservationBarController as $ctrl"> <h5 class="h5-heading-reservation restaurant-h5">Make a free reservation</h5> <form name="reservationForm" ng-submit="checkReservation()"> <div class="row no-gutters"> <div class="col-xs-12 col-sm-6 col-md-3"> <input type="number" class="form-control home-form-control" placeholder="Guests" ng-model="selectedNumber" min="1" max="15"> </div> <div class="col-xs-12 col-sm-6 col-md-3"> <input type="date" class="form-control restaurant-form-control" ng-model="selectedDate" min="{{minDate | date:\'yyyy-MM-dd\'}}" max="{{maxDate | date:\'yyyy-MM-dd\'}}" value="{{selectedDate  | date:\'yyyy-MM-dd\'}}"> </div> <div class="col-xs-12 col-sm-6 col-md-3"> <input type="time" class="form-control restaurant-form-control" ng-model="selectedTime" step="900" min="{{minTime | date:\'HH:mm\'}}" max="22:00" value="{{selectedTime| date:\'HH:mm\'}}" required> </div> <div class="col-xs-12 col-sm-12 col-md-3"> <button type="submit" class="btn btn-restaurant btn-block btn-primary form-btn">Find a table</button> </div> </div> </form> <div uib-collapse="AvailabilityErrorColapsed"> <div class="alert alert-warning"> <strong>Sorry!</strong> {{error}}. </div> </div> <div uib-collapse="AvailabilityInfoColapsed"> <h3 class="availability-info restaurant-h3">Availability on {{selectedDate | date:\'MMMM d, yyyy\'}} around {{selectedTime| date:\'HH:mm\'}} for {{selectedNumber}}: </h3> <span class="glyphicon glyphicon-glass" aria-hidden="true"></span> {{tablesLeft}} tables left <h3 class="availability-info restaurant-h3">Select the nearest time that fits your chosen time:</h3> <button type="button" class="btn btn-restaurant btn-block btn-reserv" ng-repeat="time in bestTimes" ng-click="proceedReservation(time)">{{time}} </button> </div> </div> <div id="About" class="container-card"> <h5 class="restaurant-h5">About {{restaurant.restaurantName}}</h5> <!--map--> <ui-gmap-google-map center="map.center" zoom="map.zoom"> <ui-gmap-marker idkey="1" coords="marker.coordinates"> </ui-gmap-marker> </ui-gmap-google-map> <h6 class="desc restaurant-h6">Description</h6> <p class="desc-p restaurant-p"> {{restaurant.description}} </p> </div> <div id="Menu" class="container-card" ng-controller="MenuController as $menu"> <h5 class="menu-heading restaurant-h5">Menu: </h5> <div class="btn-group btn-group-toggle" data-toggle="buttons"> <label class="btn btn-restaurant btn-secondary btn-menu active" ng-click="$menu.getMenu(\'Breakfast\')"> <input type="radio" name="options" id="option1" autocomplete="off" checked> Breakfast </label> <label class="btn btn-restaurant btn-secondary btn-menu" ng-click="$menu.getMenu(\'Lunch\')"> <input type="radio" name="options" id="option2" autocomplete="off"> Lunch </label> <label class="btn btn-restaurant btn-secondary btn-menu" ng-click="$menu.getMenu(\'Dinner\')"> <input type="radio" name="options" id="option3" autocomplete="off"> Dinner </label> </div> <hr> <div class="menu-items" ng-style="{\'max-height\': $menu.myHeight}"> <div> <div class="dish-type-row" ng-repeat="dishType in arrayDishes"> <h6 class="type-title restaurant-h6"> {{dishType[0].dishType}}</h6> <hr> <div class="row no-gutters dish-row" ng-repeat="dish in dishType"> <div class="col-xs-3"> {{dish.name}} </div> <div class="col-xs-6"> </div> <div class="col-xs-3 price"> {{dish.price | currency : "$ " : 2}} </div> <p class="menu-dish-description restaurant-p">{{dish.description}}</p> </div> </div> </div> </div> <div class="fadeout"></div> <button class="btn btn-restaurant btn-block see-full-menu center-block" ng-click="$menu.showMenu()">{{$menu.text}}</button> </div> <div id="Reviews" class="container-card card-review"> <h5 class="h5-heading-reservation review-h5 restaurant-h5">Reviews</h5> <div class="review-card"> <h6 class="restaurant-h6" ng-show="noReviews">No available reviews for this restaurant ...</h6> <div class="review-item" ng-repeat="review in reviews"> <hr> <h6 class="review-item-name restaurant-h6"> {{review.name}} </h6> <span class="glyphicon glyphicon-star" ng-repeat="n in range(review.mark)"></span><span class="glyphicon glyphicon-star-empty" ng-repeat="n in range(5-review.mark)"></span> <p class="restaurant-p">{{review.comment}}</p> <p class="review-time restaurant-p">{{review.insertTime | date:\'yyyy-MM-dd\'}}</p> </div> </div> <a id="Photos"></a> </div> </div> </div> </div> </body>'),a.put("views/restaurants.html",'<body> <div class="container text-center container-restaurants filter-container"> <div class="row no-gutters form-row search-filter-row"> <form ng-submit="filter()"> <div class="col-xs-12 col-md-10 search-filter-col"> <input type="search" ng-model="searchText" class="form-control home-form-control form-control-lg" placeholder="Location, Restaurant or Cousine "> </div> <div class="col-xs-12 col-md-1 search-filter-col"> <div class="btn-group" uib-dropdown auto-close="outsideClick"> <button id="single-button" type="button" class="btn btn-home filter-dropdown btn-primary btn-block" uib-dropdown-toggle ng-disabled="disabled"> Filter by <span class="caret"></span> </button> <ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="single-button"> <li class="filter-item"> <ul class="list-unstyled"> <li> <h5 class="filter-heading">RADIUS</h5> </li> <li> {{radiusHowMuch}} <input type="range" ng-model="radius" min="0" max="100" step="5" ng-change="rangeController()" ng-disabled="disableRange"> </li> </ul> </li> <li role="menuitem"> <ul class="list-inline filter-inline-drop"> <li class="filter-item"> <ul class="list-unstyled"> <li> <h5 class="filter-heading">PRICE</h5> </li> <li> <span uib-rating ng-model="price" class="restaurants-rate" on-leave="overStar = null" state-on="\'glyphicon glyphicon-usd glyph-filter-full\'" state-off="\'glyphicon glyphicon-usd glyph-filter-empty\'" aria-labelledby="default-rating"></span> </li> </ul> </li> <li class="filter-item"> <ul class="list-unstyled"> <li> <h5 class="filter-heading">RATING</h5> </li> <li> <span uib-rating ng-model="rate" class="restaurants-rate" on-leave="overStar = null" state-on="\'glyphicon glyphicon-star glyph-filter-full\'" state-off="\'glyphicon glyphicon-star-empty glyph-filter-empty\'" aria-labelledby="default-rating"></span> </li> </ul> </li> </ul> </li> <li class="divider"></li> <li role="menuitem" class="filter-item"> <h5 class="filter-heading">COUSINE</h5> </li> <li role="menuitem"> <ul class="list-inline filter-inline-drop"> <li class="filter-item"> <select class="restaurants-select" multiple id="categorymultipleleft" ng-model="categoriesLeft[$index]" ng-options="category.name for category in categories.left track by category.id" size="{{categories.left.length+categories.left.length/2}}"></select> </li> <li class="filter-item left-cats"> <select class="restaurants-select" multiple id="categorymultipleright" ng-model="categoriesRight[$index]" ng-options="category.name for category in categories.right track by category.id" size="{{categories.right.length+categories.right.length/2}}"></select> </li> </ul> </li> </ul> </div> </div> <div class="col-xs-12 col-md-1 search-filter-col"> <button type="submit" class="btn btn-home btn-block btn-primary form-btn">Search</button> </div> </form> </div> <div uib-alert class="alert-success alert-reservation-filter-info" ng-show="!alertHidden" close="closeAlert()"> Showing restaurants that are available on <strong>{{reservationInfo.reservationDate | date:\'MMMM d, yyyy\'}}</strong> around <strong>{{reservationInfo.reservationHour| date:\'HH:mm\'}}</strong> for <strong>{{reservationInfo.persons}}</strong> </div> <div class="row filter-row"> <img src="../images/ajax-loader.fc2622d3.gif" ng-show="loading"> <div class="no-results" ng-show="noResults"> <h3>No restaurants were found!</h3> </div> <div class="col-sm-6 col-md-4" ng-repeat="y in restaurants" ng-show="!loading && !noResults"> <div class="card" ng-click="save(y)"> <img ng-src="{{y.imageFileName}}"> <div class="container"> <h3> {{y.restaurantName}} </h3> <ul class="list list-inline"> <li class="middle"> <span class="glyphicon glyphicon-star" ng-repeat="n in range(y.mark)"></span><span class="glyphicon glyphicon-star-empty" ng-repeat="n in range(5-y.mark)"></span> </li> <li> <span>({{y.votes}})</span> </li> <li class="middle"> <span class="glyphicon glyphicon-usd dolar-full" ng-repeat="n in range(y.priceRange)"></span><span class="glyphicon glyphicon-usd dolar-empty" ng-repeat="n in range(5-y.priceRange)"></span> </li> </ul> <hr> <p style="color: gray"> {{y.foodType}} </p> </div> <button type="button" class="btn btn-home btn-block" ng-click="save(y)">Reserve Now</button> </div> </div> </div> <ul uib-pagination total-items="numPages" ng-model="bigCurrentPage" max-size="maxSize" class="pagination-sm" boundary-link-numbers="true" ng-change="filter()" ng-show="!noResults"></ul> </div> <div class="container popular-loc"> <h3 class="text-center">Popular locations</h3> <div class="row popular-locations-row"> <div class="col-xs-6 col-sm-3 col-md-3 text-left" ng-model="name" ng-repeat="name in popularLocations"> <button class="btn-location center-block pop-loc-info" ng-click="filterLocations(name.location)"> <h4>{{name.location}}</h4> <p class="number">{{name.num}} restaurants</p> </button> </div> </div> </div> </body>');
}]);